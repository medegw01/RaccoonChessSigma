(()=>{"use strict";var t={616:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.raccoon_evaluate=void 0,e.raccoon_evaluate=function(t){return t.material_eg[t.turn]+t.material_mg[t.turn]}},406:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.raccoonZero_evaluate=void 0,e.raccoonZero_evaluate=function(t){return t.material_eg[t.turn]+t.material_mg[t.turn]}},971:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),B=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),E=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&n(e,t,i);return B(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.is_square_attacked=void 0;const A=E(i(54)),r=E(i(596)),_=[-8,-19,-21,-12,8,19,21,12],I=[-1,-10,1,10],C=[-9,-11,11,9],o=[-1,-10,1,10,-9,-11,11,9];e.is_square_attacked=function(t,e,i){let n,B,E;if(e===A.COLORS.WHITE){if(i.pieces[t-11]===A.PIECES.WHITEPAWN||i.pieces[t-9]===A.PIECES.WHITEPAWN)return!0}else if(i.pieces[t+11]===A.PIECES.BLACKPAWN||i.pieces[t+9]===A.PIECES.BLACKPAWN)return!0;for(let B=0;B<8;B++){if(n=i.pieces[t+_[B]],n!==A.PIECES.OFF_BOARD_PIECE&&r.is_knight[n]&&r.get_color_piece[n]===e)return!0;if(n=i.pieces[t+o[B]],n!==A.PIECES.OFF_BOARD_PIECE&&r.is_king[n]&&r.get_color_piece[n]===e)return!0}for(let _=0;_<2;_++){let o,a;0===_?(o=I,a=r.is_rook_or_queen):(o=C,a=r.is_bishop_or_queen);for(let _=0;_<4;_++)for(B=o[_],E=t+B,n=i.pieces[E];n!==A.PIECES.OFF_BOARD_PIECE;){if(n!==A.PIECES.EMPTY){if(a[n]&&r.get_color_piece[n]===e)return!0;break}E+=B,n=i.pieces[E]}}return!1}},54:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),B=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),E=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&n(e,t,i);return B(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.board_to_fen=e.fen_to_board=e.algebraic_to_square=e.square_to_algebraic=e.board_to_position_t=e.board_to_printable=e.mirror_board=e.clear_board=e.PIECE_INDEX=e.SQUARE_COLOR=e.IS_VALID_PIECE=e.SQUARE_ON_BOARD=e.FLIP64=e.SQ120=e.SQ64=e.FILE_RANK_TO_SQUARE=e.CASTLING=e.SQUARES=e.COLORS=e.RANKS=e.FILES=e.PIECES=void 0;const A=E(i(596)),r=E(i(697));var _,I,C,o,a,g;function s(t,e){return 21+t+10*e}function F(t){return A.square120_to_square64[t]}function c(t){return A.square64_to_square120[t]}function D(t){return A.flip[t]}function x(t){return A.files_board[t]!==a.OFF_BOARD}function S(t){return(A.ranks_board[t]+A.files_board[t])%2==0?o.BLACK:o.WHITE}function l(t,e){return 10*t+e}function u(t){for(let e=0;e<A.BOARD_SQUARE_NUM;e++)t.pieces[e]=_.OFF_BOARD_PIECE;for(let e=0;e<64;e++)t.pieces[c(e)]=_.EMPTY;for(let e=0;e<2;e++)t.number_big_pieces[e]=0,t.number_major_pieces[e]=0,t.number_minor_pieces[e]=0,t.material_mg[e]=0,t.material_eg[e]=0;for(let e=0;e<3;e++)t.pawns[e]=0n;for(let e=0;e<13;e++)t.number_pieces[e]=0;t.king_square[o.BLACK]=t.king_square[o.WHITE]=a.OFF_SQUARE,t.turn=o.WHITE,t.enpassant=a.OFF_SQUARE,t.half_moves=0,t.ply=0,t.full_moves=1,t.history_ply=0,t.castling_right=0,t.current_polyglot_key=0n}function p(t){for(let e=0;e<A.BOARD_SQUARE_NUM;e++){const i=t.pieces[e];if(x(e)&&i!==_.OFF_BOARD_PIECE&&i!==_.EMPTY){const n=A.get_color_piece[i];A.is_big_piece[i]&&t.number_big_pieces[n]++,A.is_major_piece[i]&&t.number_major_pieces[n]++,A.is_minor_piece[i]&&t.number_minor_pieces[n]++,t.material_mg[n]+=A.get_value_piece[A.PHASE.MG][i],t.material_eg[n]+=A.get_value_piece[A.PHASE.EG][i],t.piece_list[l(i,t.number_pieces[i])]=e,t.number_pieces[i]++,i===_.WHITEKING&&(t.king_square[o.WHITE]=e),i===_.BLACKKING&&(t.king_square[o.BLACK]=e),i===_.WHITEPAWN?(t.pawns[o.WHITE]=A.SET_BIT(t.pawns[o.WHITE],F(e)),t.pawns[o.BOTH]=A.SET_BIT(t.pawns[o.BOTH],F(e))):i===_.BLACKPAWN&&(t.pawns[o.BLACK]=A.SET_BIT(t.pawns[o.BLACK],F(e)),t.pawns[o.BOTH]=A.SET_BIT(t.pawns[o.BOTH],F(e)))}}}function O(t){const e="a".charCodeAt(0)+A.files_board[t],i="1".charCodeAt(0)+A.ranks_board[t];return String.fromCharCode(e)+String.fromCharCode(i)}!function(t){t[t.EMPTY=0]="EMPTY",t[t.WHITEPAWN=1]="WHITEPAWN",t[t.WHITEBISHOP=2]="WHITEBISHOP",t[t.WHITEKNIGHT=3]="WHITEKNIGHT",t[t.WHITEROOK=4]="WHITEROOK",t[t.WHITEQUEEN=5]="WHITEQUEEN",t[t.WHITEKING=6]="WHITEKING",t[t.BLACKPAWN=7]="BLACKPAWN",t[t.BLACKBISHOP=8]="BLACKBISHOP",t[t.BLACKKNIGHT=9]="BLACKKNIGHT",t[t.BLACKROOK=10]="BLACKROOK",t[t.BLACKQUEEN=11]="BLACKQUEEN",t[t.BLACKKING=12]="BLACKKING",t[t.OFF_BOARD_PIECE=13]="OFF_BOARD_PIECE"}(_=e.PIECES||(e.PIECES={})),function(t){t[t.A_FILE=0]="A_FILE",t[t.B_FILE=1]="B_FILE",t[t.C_FILE=2]="C_FILE",t[t.D_FILE=3]="D_FILE",t[t.E_FILE=4]="E_FILE",t[t.F_FILE=5]="F_FILE",t[t.G_FILE=6]="G_FILE",t[t.H_FILE=7]="H_FILE",t[t.NONE_FILE=8]="NONE_FILE"}(I=e.FILES||(e.FILES={})),function(t){t[t.FIRST_RANK=0]="FIRST_RANK",t[t.SECOND_RANK=1]="SECOND_RANK",t[t.THIRD_RANK=2]="THIRD_RANK",t[t.FOURTH_RANK=3]="FOURTH_RANK",t[t.FIFTH_RANK=4]="FIFTH_RANK",t[t.SIXTH_RANK=5]="SIXTH_RANK",t[t.SEVENTH_RANK=6]="SEVENTH_RANK",t[t.EIGHTH_RANK=7]="EIGHTH_RANK",t[t.NONE_RANK=8]="NONE_RANK"}(C=e.RANKS||(e.RANKS={})),function(t){t[t.WHITE=0]="WHITE",t[t.BLACK=1]="BLACK",t[t.BOTH=2]="BOTH"}(o=e.COLORS||(e.COLORS={})),function(t){t[t.A1=21]="A1",t[t.B1=22]="B1",t[t.C1=23]="C1",t[t.D1=24]="D1",t[t.E1=25]="E1",t[t.F1=26]="F1",t[t.G1=27]="G1",t[t.H1=28]="H1",t[t.A2=31]="A2",t[t.B2=32]="B2",t[t.C2=33]="C2",t[t.D2=34]="D2",t[t.E2=35]="E2",t[t.F2=36]="F2",t[t.G2=37]="G2",t[t.H2=38]="H2",t[t.A3=41]="A3",t[t.B3=42]="B3",t[t.C3=43]="C3",t[t.D3=44]="D3",t[t.E3=45]="E3",t[t.F3=46]="F3",t[t.G3=47]="G3",t[t.H3=48]="H3",t[t.A4=51]="A4",t[t.B4=52]="B4",t[t.C4=53]="C4",t[t.D4=54]="D4",t[t.E4=55]="E4",t[t.F4=56]="F4",t[t.G4=57]="G4",t[t.H4=58]="H4",t[t.A5=61]="A5",t[t.B5=62]="B5",t[t.C5=63]="C5",t[t.D5=64]="D5",t[t.E5=65]="E5",t[t.F5=66]="F5",t[t.G5=67]="G5",t[t.H5=68]="H5",t[t.A6=71]="A6",t[t.B6=72]="B6",t[t.C6=73]="C6",t[t.D6=74]="D6",t[t.E6=75]="E6",t[t.F6=76]="F6",t[t.G6=77]="G6",t[t.H6=78]="H6",t[t.A7=81]="A7",t[t.B7=82]="B7",t[t.C7=83]="C7",t[t.D7=84]="D7",t[t.E7=85]="E7",t[t.F7=86]="F7",t[t.G7=87]="G7",t[t.H7=88]="H7",t[t.A8=91]="A8",t[t.B8=92]="B8",t[t.C8=93]="C8",t[t.D8=94]="D8",t[t.E8=95]="E8",t[t.F8=96]="F8",t[t.G8=97]="G8",t[t.H8=98]="H8",t[t.OFF_SQUARE=99]="OFF_SQUARE",t[t.OFF_BOARD=100]="OFF_BOARD",t[t.ALL=101]="ALL"}(a=e.SQUARES||(e.SQUARES={})),function(t){t[t.WHITE_CASTLE_OO=1]="WHITE_CASTLE_OO",t[t.WHITE_CASTLE_OOO=2]="WHITE_CASTLE_OOO",t[t.BLACK_CASTLE_OO=4]="BLACK_CASTLE_OO",t[t.BLACK_CASTLE_OOO=8]="BLACK_CASTLE_OOO"}(g=e.CASTLING||(e.CASTLING={})),e.FILE_RANK_TO_SQUARE=s,e.SQ64=F,e.SQ120=c,e.FLIP64=D,e.SQUARE_ON_BOARD=x,e.IS_VALID_PIECE=function(t){return t>=_.WHITEPAWN&&t<=_.BLACKKING},e.SQUARE_COLOR=S,e.PIECE_INDEX=l,e.clear_board=u,e.mirror_board=function(t){const e=new Array(64),i=1^t.turn,n=[_.EMPTY,_.BLACKPAWN,_.BLACKBISHOP,_.BLACKKNIGHT,_.BLACKROOK,_.BLACKQUEEN,_.BLACKKING,_.WHITEPAWN,_.WHITEBISHOP,_.WHITEKNIGHT,_.WHITEROOK,_.WHITEQUEEN,_.WHITEKING,_.OFF_BOARD_PIECE];let B,E,A=0,I=a.OFF_SQUARE;for(t.castling_right&g.WHITE_CASTLE_OO&&(A|=g.BLACK_CASTLE_OO),t.castling_right&g.WHITE_CASTLE_OOO&&(A|=g.BLACK_CASTLE_OOO),0!=(t.castling_right&g.BLACK_CASTLE_OO)&&(A|=g.WHITE_CASTLE_OO),0!=(t.castling_right&g.BLACK_CASTLE_OOO)&&(A|=g.WHITE_CASTLE_OOO),t.enpassant!==a.OFF_SQUARE&&(I=c(D(F(t.enpassant)))),B=0;B<64;B++)e[B]=t.pieces[c(D(B))];const C=t.ply,o=t.history_ply,s=t.half_moves;for(u(t),B=0;B<64;B++)E=n[e[B]],t.pieces[c(B)]=E;t.turn=i,t.castling_right=A,t.enpassant=I,t.half_moves=s,t.ply=C,t.history_ply=o,t.current_polyglot_key=r.polyglot_key(t),p(t)},e.board_to_printable=function(t,e,i,n,B){let E="   A B C D E F G H   \n";E+="\n";for(let B=C.EIGHTH_RANK;B>=C.FIRST_RANK;--B){E+=(B+1).toString()+"  ";for(let A=I.A_FILE;A<=I.H_FILE;++A){const r=s(A,B),I=t.pieces[r];I===_.EMPTY?E+=S(r)===o.WHITE?i+" ":n+" ":E+=e[I-1]+" "}E+=" "+(B+1).toString()+"\n"}return E+="\n",E+="   A B C D E F G H   \n",B&&(E+="        INFO         \n",E+="turn: "+"wb-"[t.turn]+"\n",E+="enpass: "+(t.enpassant===a.OFF_SQUARE?"-":O(t.enpassant))+"\n",E+="castling: "+(0!=(t.castling_right&g.WHITE_CASTLE_OO)?A.piece_to_ascii[_.WHITEKING]:"")+(0!=(t.castling_right&g.WHITE_CASTLE_OOO)?A.piece_to_ascii[_.WHITEQUEEN]:"")+(0!=(t.castling_right&g.BLACK_CASTLE_OO)?A.piece_to_ascii[_.BLACKKING]:"")+(0!=(t.castling_right&g.BLACK_CASTLE_OOO)?A.piece_to_ascii[_.BLACKQUEEN]:""),E+="\npoly key: 0x"+t.current_polyglot_key.toString(16)+"\n"),E},e.board_to_position_t=function(t){const e={},i=[];let n;for(let e=C.EIGHTH_RANK;e>=C.FIRST_RANK;--e){n=[];for(let i=I.A_FILE;i<=I.H_FILE;++i){const B=t.pieces[s(i,e)];B===_.EMPTY?n.push(null):n.push({type:A.piece_to_ascii[B].toLowerCase(),color:A.is_white_piece[B]?"w":"b"})}i.push(n)}return e.board=i,e.turn="wb-"[t.turn],e.enpassant=t.enpassant===a.OFF_SQUARE?"-":O(t.enpassant),e.move_count=[t.half_moves,t.full_moves],e.castling=[0!=(t.castling_right&g.WHITE_CASTLE_OO),0!=(t.castling_right&g.WHITE_CASTLE_OOO),0!=(t.castling_right&g.BLACK_CASTLE_OO),0!=(t.castling_right&g.BLACK_CASTLE_OOO)],e},e.square_to_algebraic=O,e.algebraic_to_square=function(t){return t[1].charCodeAt(0)>"8".charCodeAt(0)||t[1].charCodeAt(0)<"1".charCodeAt(0)||t[0].charCodeAt(0)>"h".charCodeAt(0)||t[0].charCodeAt(0)<"a".charCodeAt(0)?a.OFF_BOARD:s(t[0].charCodeAt(0)-"a".charCodeAt(0),t[1].charCodeAt(0)-"1".charCodeAt(0))},e.fen_to_board=function(t,e){let i=C.EIGHTH_RANK,n=I.A_FILE;const B=t.length;let E=0,F=0,D=0,x=0,S=0;for(A.ASSERT(0!=B,"FenErr: Empty fen provided"),u(e);i>=C.FIRST_RANK&&S<B;){switch(F=1,t[S]){case"p":E=_.BLACKPAWN;break;case"r":E=_.BLACKROOK;break;case"n":E=_.BLACKKNIGHT;break;case"b":E=_.BLACKBISHOP;break;case"k":E=_.BLACKKING;break;case"q":E=_.BLACKQUEEN;break;case"Q":E=_.WHITEQUEEN;break;case"K":E=_.WHITEKING;break;case"N":E=_.WHITEKNIGHT;break;case"R":E=_.WHITEROOK;break;case"B":E=_.WHITEBISHOP;break;case"P":E=_.WHITEPAWN;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":E=_.EMPTY,F=t[S].charCodeAt(0)-"0".charCodeAt(0);break;case"/":case" ":i--,n=I.A_FILE,S++;continue;default:A.ASSERT(!1,`FenErr: Illegal character ${t[S]}`)}for(let t=0;t<F;t++)D=8*i+n,x=c(D),E!==_.EMPTY&&(e.pieces[x]=E),n++;S++}"w"!==t[S]&&"b"!==t[S]&&A.ASSERT(!1,"FenErr: Side to move is invalid. It should be w or b"),e.turn="w"===t[S]?o.WHITE:o.BLACK,S+=2;for(let i=0;i<4&&" "!==t[S];i++){switch(t[S]){case"K":e.castling_right|=g.WHITE_CASTLE_OO;break;case"Q":e.castling_right|=g.WHITE_CASTLE_OOO;break;case"k":e.castling_right|=g.BLACK_CASTLE_OO;break;case"q":e.castling_right|=g.BLACK_CASTLE_OOO}S++}S++,"-"!==t[S]&&(n=t.charCodeAt(S)-"a".charCodeAt(0),i=t.charCodeAt(++S)-"1".charCodeAt(0),n>=I.A_FILE&&n<=I.H_FILE&&i>=C.FIRST_RANK&&i<=C.EIGHTH_RANK||A.ASSERT(!1,"FenErr: Invalid en-passant square"),e.enpassant=s(n,i)),S++;let O="";for(S++;" "!==t[S];)O+=t[S++];S++;const T=parseInt(O);T<0&&A.ASSERT(!1,`FenErr: Half move cannot be a negative integer. GOT ${T}`);let f="";for(;S<B;)f+=t[S++];const R=parseInt(f);R<1&&A.ASSERT(!1,`FenErr: Full move must be greater than 0. GOT ${R}`),e.half_moves=T,e.history_ply=0,e.ply=0,e.full_moves=R,e.current_polyglot_key=r.polyglot_key(e),p(e);try{!function(t){const e=[0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0],n=[0,0],B=[0,0],E=[0,0],I=[0,0],g=[0n,0n,0n];g[o.WHITE]=t.pawns[o.WHITE],g[o.BLACK]=t.pawns[o.BLACK],g[o.BOTH]=t.pawns[o.BOTH];for(let e=_.WHITEPAWN;e<=_.BLACKKING;++e)for(let i=0;i<t.number_pieces[e];++i){const n=t.piece_list[l(e,i)];A.ASSERT(t.pieces[n]==e,`BoardErr: Piece List Mismatch\n Got: ${A.piece_to_ascii[t.pieces[n]]} Expect: ${A.piece_to_ascii[e]}`)}for(let r=0;r<64;++r){const _=c(r),C=t.pieces[_];e[C]++;const o=A.get_color_piece[C];A.is_big_piece[C]&&i[o]++,A.is_minor_piece[C]&&B[o]++,A.is_major_piece[C]&&n[o]++,E[o]+=A.get_value_piece[A.PHASE.EG][C],I[o]+=A.get_value_piece[A.PHASE.MG][C]}for(let i=_.WHITEPAWN;i<=_.BLACKKING;++i)A.ASSERT(e[i]==t.number_pieces[i],`BoardErr: no. of Pieces Mismatch\n Got: ${t.number_pieces[i]} Expect: ${e[i]}`);let s=A.COUNT_BITS(g[o.WHITE]);A.ASSERT(s==t.number_pieces[_.WHITEPAWN],`BoardErr: no. White Pawns Mismatch\n Got: ${t.number_pieces[_.WHITEPAWN]} Expect: ${s}`),s=A.COUNT_BITS(g[o.BLACK]),A.ASSERT(s==t.number_pieces[_.BLACKPAWN],`BoardErr: no. Black Pawns Mismatch\n Got: ${t.number_pieces[_.BLACKPAWN]} Expect: ${s}`),s=A.COUNT_BITS(g[o.BOTH]);const F=t.number_pieces[_.BLACKPAWN]+t.number_pieces[_.WHITEPAWN];A.ASSERT(s==F,`BoardErr: no. Both Pawns Mismatch\n Got: ${F} Expect: ${s}`);for(let e=0;e<=64;++e)A.ISKthBIT_SET(g[o.WHITE],e)&&A.ASSERT(t.pieces[c(e)]==_.WHITEPAWN,`BoardErr: no. White Pawn BitBoard  Mismatch at ${c(e)}`);for(let e=0;e<=64;++e)A.ISKthBIT_SET(g[o.BLACK],e)&&A.ASSERT(t.pieces[c(e)]==_.BLACKPAWN,`BoardErr: no. White Pawn BitBoard  Mismatch at  ${c(e)}`);for(let e=0;e<=64;++e)A.ISKthBIT_SET(g[o.BOTH],e)&&A.ASSERT(t.pieces[c(e)]==_.BLACKPAWN||t.pieces[c(e)]==_.WHITEPAWN,`BoardErr: no. Both Pawns BitBoard Mismatch at ${c(e)}`);A.ASSERT(E[o.WHITE]==t.material_eg[o.WHITE],`BoardErr: White eg Material imbalance. Got: ${t.material_eg[o.WHITE]} Expect: ${E[o.WHITE]}`),A.ASSERT(I[o.WHITE]==t.material_mg[o.WHITE],`BoardErr: White mg Material imbalance. Got: ${t.material_mg[o.WHITE]} Expect: ${I[o.WHITE]}`),A.ASSERT(E[o.BLACK]==t.material_eg[o.BLACK],`BoardErr: BLACK eg Material imbalance. Got: ${t.material_eg[o.BLACK]} Expect: ${E[o.BLACK]}`),A.ASSERT(I[o.BLACK]==t.material_mg[o.BLACK],`BoardErr: BLACK mg Material imbalance. Got: ${t.material_mg[o.BLACK]} Expect: ${I[o.BLACK]}`),A.ASSERT(B[o.WHITE]==t.number_minor_pieces[o.WHITE],`BoardErr: no. White minor piece Mismatch\n Got: ${t.number_minor_pieces[o.WHITE]} Expect: ${B[o.WHITE]}`),A.ASSERT(B[o.BLACK]==t.number_minor_pieces[o.BLACK],`BoardErr: no. Black minor piece Mismatch\n Got: ${t.number_minor_pieces[o.BLACK]} Expect: ${B[o.BLACK]}`),A.ASSERT(n[o.WHITE]==t.number_major_pieces[o.WHITE],`BoardErr: no. White major piece Mismatch\n Got: ${t.number_major_pieces[o.WHITE]} Expect: ${n[o.WHITE]}`),A.ASSERT(n[o.BLACK]==t.number_major_pieces[o.BLACK],`BoardErr: no. Black major piece Mismatch\n Got: ${t.number_major_pieces[o.BLACK]} Expect: ${n[o.BLACK]}`),A.ASSERT(i[o.WHITE]==t.number_big_pieces[o.WHITE],`BoardErr: no. White big piece Mismatch\n Got: ${t.number_big_pieces[o.WHITE]} Expect: ${i[o.WHITE]}`),A.ASSERT(i[o.BLACK]==t.number_big_pieces[o.BLACK],`BoardErr: no. White big piece Mismatch\n Got: ${t.number_big_pieces[o.BLACK]} Expect: ${i[o.BLACK]}`),A.ASSERT(t.turn==o.WHITE||t.turn==o.BLACK),A.ASSERT(r.polyglot_key(t)==t.current_polyglot_key,`BoardErr: no. Poly Key Mismatch\n Got: ${t.current_polyglot_key} Expect: ${r.polyglot_key(t)}`),A.ASSERT(t.enpassant==a.OFF_SQUARE||A.ranks_board[t.enpassant]==C.SIXTH_RANK&&t.turn==o.WHITE||A.ranks_board[t.enpassant]==C.THIRD_RANK&&t.turn==o.BLACK,"BoardErr: eg Wrong empassant square"),A.ASSERT(t.pieces[t.king_square[o.WHITE]]==_.WHITEKING,"BoardErr: Wrong White king square"),A.ASSERT(t.pieces[t.king_square[o.BLACK]]==_.BLACKKING,"BoardErr: Wrong Black king square")}(e)}catch(t){A.ASSERT(!1,`FenErr: Cannot not parse fen due to ${t.message}`)}},e.board_to_fen=function(t){let e="",i=0;for(let n=C.EIGHTH_RANK;n>=C.FIRST_RANK;--n){for(let B=I.A_FILE;B<=I.H_FILE;B++){const E=s(B,n),r=t.pieces[E];r===_.EMPTY?i++:(i>0&&(e+=i.toString(),i=0),e+=A.piece_to_ascii[r])}i>0&&(e+=i.toString()),n!==C.FIRST_RANK&&(e+="/"),i=0}e+=t.turn===o.WHITE?" w ":" b ";let n="";0!=(t.castling_right&g.WHITE_CASTLE_OO)&&(n+="K"),0!=(t.castling_right&g.WHITE_CASTLE_OOO)&&(n+="Q"),0!=(t.castling_right&g.BLACK_CASTLE_OO)&&(n+="k"),0!=(t.castling_right&g.BLACK_CASTLE_OOO)&&(n+="q"),e+=""!==n?n:"-",e+=" ";const B=t.enpassant;return e+=B!==a.OFF_SQUARE?O(B):"-",e+=" ",e+=t.half_moves.toString(),e+=" ",e+=t.full_moves.toString(),e}},697:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),B=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),E=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&n(e,t,i);return B(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.polyglot_key=e.random64_poly=e.random_turn=e.random_enpass=e.random_castle=e.random_piece=void 0;const A=E(i(54)),r=E(i(596));e.random_piece=0,e.random_castle=768,e.random_enpass=772,e.random_turn=780,e.random64_poly=[BigInt("0x9D39247E33776D41"),BigInt("0x2AF7398005AAA5C7"),BigInt("0x44DB015024623547"),BigInt("0x9C15F73E62A76AE2"),BigInt("0x75834465489C0C89"),BigInt("0x3290AC3A203001BF"),BigInt("0x0FBBAD1F61042279"),BigInt("0xE83A908FF2FB60CA"),BigInt("0x0D7E765D58755C10"),BigInt("0x1A083822CEAFE02D"),BigInt("0x9605D5F0E25EC3B0"),BigInt("0xD021FF5CD13A2ED5"),BigInt("0x40BDF15D4A672E32"),BigInt("0x011355146FD56395"),BigInt("0x5DB4832046F3D9E5"),BigInt("0x239F8B2D7FF719CC"),BigInt("0x05D1A1AE85B49AA1"),BigInt("0x679F848F6E8FC971"),BigInt("0x7449BBFF801FED0B"),BigInt("0x7D11CDB1C3B7ADF0"),BigInt("0x82C7709E781EB7CC"),BigInt("0xF3218F1C9510786C"),BigInt("0x331478F3AF51BBE6"),BigInt("0x4BB38DE5E7219443"),BigInt("0xAA649C6EBCFD50FC"),BigInt("0x8DBD98A352AFD40B"),BigInt("0x87D2074B81D79217"),BigInt("0x19F3C751D3E92AE1"),BigInt("0xB4AB30F062B19ABF"),BigInt("0x7B0500AC42047AC4"),BigInt("0xC9452CA81A09D85D"),BigInt("0x24AA6C514DA27500"),BigInt("0x4C9F34427501B447"),BigInt("0x14A68FD73C910841"),BigInt("0xA71B9B83461CBD93"),BigInt("0x03488B95B0F1850F"),BigInt("0x637B2B34FF93C040"),BigInt("0x09D1BC9A3DD90A94"),BigInt("0x3575668334A1DD3B"),BigInt("0x735E2B97A4C45A23"),BigInt("0x18727070F1BD400B"),BigInt("0x1FCBACD259BF02E7"),BigInt("0xD310A7C2CE9B6555"),BigInt("0xBF983FE0FE5D8244"),BigInt("0x9F74D14F7454A824"),BigInt("0x51EBDC4AB9BA3035"),BigInt("0x5C82C505DB9AB0FA"),BigInt("0xFCF7FE8A3430B241"),BigInt("0x3253A729B9BA3DDE"),BigInt("0x8C74C368081B3075"),BigInt("0xB9BC6C87167C33E7"),BigInt("0x7EF48F2B83024E20"),BigInt("0x11D505D4C351BD7F"),BigInt("0x6568FCA92C76A243"),BigInt("0x4DE0B0F40F32A7B8"),BigInt("0x96D693460CC37E5D"),BigInt("0x42E240CB63689F2F"),BigInt("0x6D2BDCDAE2919661"),BigInt("0x42880B0236E4D951"),BigInt("0x5F0F4A5898171BB6"),BigInt("0x39F890F579F92F88"),BigInt("0x93C5B5F47356388B"),BigInt("0x63DC359D8D231B78"),BigInt("0xEC16CA8AEA98AD76"),BigInt("0x5355F900C2A82DC7"),BigInt("0x07FB9F855A997142"),BigInt("0x5093417AA8A7ED5E"),BigInt("0x7BCBC38DA25A7F3C"),BigInt("0x19FC8A768CF4B6D4"),BigInt("0x637A7780DECFC0D9"),BigInt("0x8249A47AEE0E41F7"),BigInt("0x79AD695501E7D1E8"),BigInt("0x14ACBAF4777D5776"),BigInt("0xF145B6BECCDEA195"),BigInt("0xDABF2AC8201752FC"),BigInt("0x24C3C94DF9C8D3F6"),BigInt("0xBB6E2924F03912EA"),BigInt("0x0CE26C0B95C980D9"),BigInt("0xA49CD132BFBF7CC4"),BigInt("0xE99D662AF4243939"),BigInt("0x27E6AD7891165C3F"),BigInt("0x8535F040B9744FF1"),BigInt("0x54B3F4FA5F40D873"),BigInt("0x72B12C32127FED2B"),BigInt("0xEE954D3C7B411F47"),BigInt("0x9A85AC909A24EAA1"),BigInt("0x70AC4CD9F04F21F5"),BigInt("0xF9B89D3E99A075C2"),BigInt("0x87B3E2B2B5C907B1"),BigInt("0xA366E5B8C54F48B8"),BigInt("0xAE4A9346CC3F7CF2"),BigInt("0x1920C04D47267BBD"),BigInt("0x87BF02C6B49E2AE9"),BigInt("0x092237AC237F3859"),BigInt("0xFF07F64EF8ED14D0"),BigInt("0x8DE8DCA9F03CC54E"),BigInt("0x9C1633264DB49C89"),BigInt("0xB3F22C3D0B0B38ED"),BigInt("0x390E5FB44D01144B"),BigInt("0x5BFEA5B4712768E9"),BigInt("0x1E1032911FA78984"),BigInt("0x9A74ACB964E78CB3"),BigInt("0x4F80F7A035DAFB04"),BigInt("0x6304D09A0B3738C4"),BigInt("0x2171E64683023A08"),BigInt("0x5B9B63EB9CEFF80C"),BigInt("0x506AACF489889342"),BigInt("0x1881AFC9A3A701D6"),BigInt("0x6503080440750644"),BigInt("0xDFD395339CDBF4A7"),BigInt("0xEF927DBCF00C20F2"),BigInt("0x7B32F7D1E03680EC"),BigInt("0xB9FD7620E7316243"),BigInt("0x05A7E8A57DB91B77"),BigInt("0xB5889C6E15630A75"),BigInt("0x4A750A09CE9573F7"),BigInt("0xCF464CEC899A2F8A"),BigInt("0xF538639CE705B824"),BigInt("0x3C79A0FF5580EF7F"),BigInt("0xEDE6C87F8477609D"),BigInt("0x799E81F05BC93F31"),BigInt("0x86536B8CF3428A8C"),BigInt("0x97D7374C60087B73"),BigInt("0xA246637CFF328532"),BigInt("0x043FCAE60CC0EBA0"),BigInt("0x920E449535DD359E"),BigInt("0x70EB093B15B290CC"),BigInt("0x73A1921916591CBD"),BigInt("0x56436C9FE1A1AA8D"),BigInt("0xEFAC4B70633B8F81"),BigInt("0xBB215798D45DF7AF"),BigInt("0x45F20042F24F1768"),BigInt("0x930F80F4E8EB7462"),BigInt("0xFF6712FFCFD75EA1"),BigInt("0xAE623FD67468AA70"),BigInt("0xDD2C5BC84BC8D8FC"),BigInt("0x7EED120D54CF2DD9"),BigInt("0x22FE545401165F1C"),BigInt("0xC91800E98FB99929"),BigInt("0x808BD68E6AC10365"),BigInt("0xDEC468145B7605F6"),BigInt("0x1BEDE3A3AEF53302"),BigInt("0x43539603D6C55602"),BigInt("0xAA969B5C691CCB7A"),BigInt("0xA87832D392EFEE56"),BigInt("0x65942C7B3C7E11AE"),BigInt("0xDED2D633CAD004F6"),BigInt("0x21F08570F420E565"),BigInt("0xB415938D7DA94E3C"),BigInt("0x91B859E59ECB6350"),BigInt("0x10CFF333E0ED804A"),BigInt("0x28AED140BE0BB7DD"),BigInt("0xC5CC1D89724FA456"),BigInt("0x5648F680F11A2741"),BigInt("0x2D255069F0B7DAB3"),BigInt("0x9BC5A38EF729ABD4"),BigInt("0xEF2F054308F6A2BC"),BigInt("0xAF2042F5CC5C2858"),BigInt("0x480412BAB7F5BE2A"),BigInt("0xAEF3AF4A563DFE43"),BigInt("0x19AFE59AE451497F"),BigInt("0x52593803DFF1E840"),BigInt("0xF4F076E65F2CE6F0"),BigInt("0x11379625747D5AF3"),BigInt("0xBCE5D2248682C115"),BigInt("0x9DA4243DE836994F"),BigInt("0x066F70B33FE09017"),BigInt("0x4DC4DE189B671A1C"),BigInt("0x51039AB7712457C3"),BigInt("0xC07A3F80C31FB4B4"),BigInt("0xB46EE9C5E64A6E7C"),BigInt("0xB3819A42ABE61C87"),BigInt("0x21A007933A522A20"),BigInt("0x2DF16F761598AA4F"),BigInt("0x763C4A1371B368FD"),BigInt("0xF793C46702E086A0"),BigInt("0xD7288E012AEB8D31"),BigInt("0xDE336A2A4BC1C44B"),BigInt("0x0BF692B38D079F23"),BigInt("0x2C604A7A177326B3"),BigInt("0x4850E73E03EB6064"),BigInt("0xCFC447F1E53C8E1B"),BigInt("0xB05CA3F564268D99"),BigInt("0x9AE182C8BC9474E8"),BigInt("0xA4FC4BD4FC5558CA"),BigInt("0xE755178D58FC4E76"),BigInt("0x69B97DB1A4C03DFE"),BigInt("0xF9B5B7C4ACC67C96"),BigInt("0xFC6A82D64B8655FB"),BigInt("0x9C684CB6C4D24417"),BigInt("0x8EC97D2917456ED0"),BigInt("0x6703DF9D2924E97E"),BigInt("0xC547F57E42A7444E"),BigInt("0x78E37644E7CAD29E"),BigInt("0xFE9A44E9362F05FA"),BigInt("0x08BD35CC38336615"),BigInt("0x9315E5EB3A129ACE"),BigInt("0x94061B871E04DF75"),BigInt("0xDF1D9F9D784BA010"),BigInt("0x3BBA57B68871B59D"),BigInt("0xD2B7ADEEDED1F73F"),BigInt("0xF7A255D83BC373F8"),BigInt("0xD7F4F2448C0CEB81"),BigInt("0xD95BE88CD210FFA7"),BigInt("0x336F52F8FF4728E7"),BigInt("0xA74049DAC312AC71"),BigInt("0xA2F61BB6E437FDB5"),BigInt("0x4F2A5CB07F6A35B3"),BigInt("0x87D380BDA5BF7859"),BigInt("0x16B9F7E06C453A21"),BigInt("0x7BA2484C8A0FD54E"),BigInt("0xF3A678CAD9A2E38C"),BigInt("0x39B0BF7DDE437BA2"),BigInt("0xFCAF55C1BF8A4424"),BigInt("0x18FCF680573FA594"),BigInt("0x4C0563B89F495AC3"),BigInt("0x40E087931A00930D"),BigInt("0x8CFFA9412EB642C1"),BigInt("0x68CA39053261169F"),BigInt("0x7A1EE967D27579E2"),BigInt("0x9D1D60E5076F5B6F"),BigInt("0x3810E399B6F65BA2"),BigInt("0x32095B6D4AB5F9B1"),BigInt("0x35CAB62109DD038A"),BigInt("0xA90B24499FCFAFB1"),BigInt("0x77A225A07CC2C6BD"),BigInt("0x513E5E634C70E331"),BigInt("0x4361C0CA3F692F12"),BigInt("0xD941ACA44B20A45B"),BigInt("0x528F7C8602C5807B"),BigInt("0x52AB92BEB9613989"),BigInt("0x9D1DFA2EFC557F73"),BigInt("0x722FF175F572C348"),BigInt("0x1D1260A51107FE97"),BigInt("0x7A249A57EC0C9BA2"),BigInt("0x04208FE9E8F7F2D6"),BigInt("0x5A110C6058B920A0"),BigInt("0x0CD9A497658A5698"),BigInt("0x56FD23C8F9715A4C"),BigInt("0x284C847B9D887AAE"),BigInt("0x04FEABFBBDB619CB"),BigInt("0x742E1E651C60BA83"),BigInt("0x9A9632E65904AD3C"),BigInt("0x881B82A13B51B9E2"),BigInt("0x506E6744CD974924"),BigInt("0xB0183DB56FFC6A79"),BigInt("0x0ED9B915C66ED37E"),BigInt("0x5E11E86D5873D484"),BigInt("0xF678647E3519AC6E"),BigInt("0x1B85D488D0F20CC5"),BigInt("0xDAB9FE6525D89021"),BigInt("0x0D151D86ADB73615"),BigInt("0xA865A54EDCC0F019"),BigInt("0x93C42566AEF98FFB"),BigInt("0x99E7AFEABE000731"),BigInt("0x48CBFF086DDF285A"),BigInt("0x7F9B6AF1EBF78BAF"),BigInt("0x58627E1A149BBA21"),BigInt("0x2CD16E2ABD791E33"),BigInt("0xD363EFF5F0977996"),BigInt("0x0CE2A38C344A6EED"),BigInt("0x1A804AADB9CFA741"),BigInt("0x907F30421D78C5DE"),BigInt("0x501F65EDB3034D07"),BigInt("0x37624AE5A48FA6E9"),BigInt("0x957BAF61700CFF4E"),BigInt("0x3A6C27934E31188A"),BigInt("0xD49503536ABCA345"),BigInt("0x088E049589C432E0"),BigInt("0xF943AEE7FEBF21B8"),BigInt("0x6C3B8E3E336139D3"),BigInt("0x364F6FFA464EE52E"),BigInt("0xD60F6DCEDC314222"),BigInt("0x56963B0DCA418FC0"),BigInt("0x16F50EDF91E513AF"),BigInt("0xEF1955914B609F93"),BigInt("0x565601C0364E3228"),BigInt("0xECB53939887E8175"),BigInt("0xBAC7A9A18531294B"),BigInt("0xB344C470397BBA52"),BigInt("0x65D34954DAF3CEBD"),BigInt("0xB4B81B3FA97511E2"),BigInt("0xB422061193D6F6A7"),BigInt("0x071582401C38434D"),BigInt("0x7A13F18BBEDC4FF5"),BigInt("0xBC4097B116C524D2"),BigInt("0x59B97885E2F2EA28"),BigInt("0x99170A5DC3115544"),BigInt("0x6F423357E7C6A9F9"),BigInt("0x325928EE6E6F8794"),BigInt("0xD0E4366228B03343"),BigInt("0x565C31F7DE89EA27"),BigInt("0x30F5611484119414"),BigInt("0xD873DB391292ED4F"),BigInt("0x7BD94E1D8E17DEBC"),BigInt("0xC7D9F16864A76E94"),BigInt("0x947AE053EE56E63C"),BigInt("0xC8C93882F9475F5F"),BigInt("0x3A9BF55BA91F81CA"),BigInt("0xD9A11FBB3D9808E4"),BigInt("0x0FD22063EDC29FCA"),BigInt("0xB3F256D8ACA0B0B9"),BigInt("0xB03031A8B4516E84"),BigInt("0x35DD37D5871448AF"),BigInt("0xE9F6082B05542E4E"),BigInt("0xEBFAFA33D7254B59"),BigInt("0x9255ABB50D532280"),BigInt("0xB9AB4CE57F2D34F3"),BigInt("0x693501D628297551"),BigInt("0xC62C58F97DD949BF"),BigInt("0xCD454F8F19C5126A"),BigInt("0xBBE83F4ECC2BDECB"),BigInt("0xDC842B7E2819E230"),BigInt("0xBA89142E007503B8"),BigInt("0xA3BC941D0A5061CB"),BigInt("0xE9F6760E32CD8021"),BigInt("0x09C7E552BC76492F"),BigInt("0x852F54934DA55CC9"),BigInt("0x8107FCCF064FCF56"),BigInt("0x098954D51FFF6580"),BigInt("0x23B70EDB1955C4BF"),BigInt("0xC330DE426430F69D"),BigInt("0x4715ED43E8A45C0A"),BigInt("0xA8D7E4DAB780A08D"),BigInt("0x0572B974F03CE0BB"),BigInt("0xB57D2E985E1419C7"),BigInt("0xE8D9ECBE2CF3D73F"),BigInt("0x2FE4B17170E59750"),BigInt("0x11317BA87905E790"),BigInt("0x7FBF21EC8A1F45EC"),BigInt("0x1725CABFCB045B00"),BigInt("0x964E915CD5E2B207"),BigInt("0x3E2B8BCBF016D66D"),BigInt("0xBE7444E39328A0AC"),BigInt("0xF85B2B4FBCDE44B7"),BigInt("0x49353FEA39BA63B1"),BigInt("0x1DD01AAFCD53486A"),BigInt("0x1FCA8A92FD719F85"),BigInt("0xFC7C95D827357AFA"),BigInt("0x18A6A990C8B35EBD"),BigInt("0xCCCB7005C6B9C28D"),BigInt("0x3BDBB92C43B17F26"),BigInt("0xAA70B5B4F89695A2"),BigInt("0xE94C39A54A98307F"),BigInt("0xB7A0B174CFF6F36E"),BigInt("0xD4DBA84729AF48AD"),BigInt("0x2E18BC1AD9704A68"),BigInt("0x2DE0966DAF2F8B1C"),BigInt("0xB9C11D5B1E43A07E"),BigInt("0x64972D68DEE33360"),BigInt("0x94628D38D0C20584"),BigInt("0xDBC0D2B6AB90A559"),BigInt("0xD2733C4335C6A72F"),BigInt("0x7E75D99D94A70F4D"),BigInt("0x6CED1983376FA72B"),BigInt("0x97FCAACBF030BC24"),BigInt("0x7B77497B32503B12"),BigInt("0x8547EDDFB81CCB94"),BigInt("0x79999CDFF70902CB"),BigInt("0xCFFE1939438E9B24"),BigInt("0x829626E3892D95D7"),BigInt("0x92FAE24291F2B3F1"),BigInt("0x63E22C147B9C3403"),BigInt("0xC678B6D860284A1C"),BigInt("0x5873888850659AE7"),BigInt("0x0981DCD296A8736D"),BigInt("0x9F65789A6509A440"),BigInt("0x9FF38FED72E9052F"),BigInt("0xE479EE5B9930578C"),BigInt("0xE7F28ECD2D49EECD"),BigInt("0x56C074A581EA17FE"),BigInt("0x5544F7D774B14AEF"),BigInt("0x7B3F0195FC6F290F"),BigInt("0x12153635B2C0CF57"),BigInt("0x7F5126DBBA5E0CA7"),BigInt("0x7A76956C3EAFB413"),BigInt("0x3D5774A11D31AB39"),BigInt("0x8A1B083821F40CB4"),BigInt("0x7B4A38E32537DF62"),BigInt("0x950113646D1D6E03"),BigInt("0x4DA8979A0041E8A9"),BigInt("0x3BC36E078F7515D7"),BigInt("0x5D0A12F27AD310D1"),BigInt("0x7F9D1A2E1EBE1327"),BigInt("0xDA3A361B1C5157B1"),BigInt("0xDCDD7D20903D0C25"),BigInt("0x36833336D068F707"),BigInt("0xCE68341F79893389"),BigInt("0xAB9090168DD05F34"),BigInt("0x43954B3252DC25E5"),BigInt("0xB438C2B67F98E5E9"),BigInt("0x10DCD78E3851A492"),BigInt("0xDBC27AB5447822BF"),BigInt("0x9B3CDB65F82CA382"),BigInt("0xB67B7896167B4C84"),BigInt("0xBFCED1B0048EAC50"),BigInt("0xA9119B60369FFEBD"),BigInt("0x1FFF7AC80904BF45"),BigInt("0xAC12FB171817EEE7"),BigInt("0xAF08DA9177DDA93D"),BigInt("0x1B0CAB936E65C744"),BigInt("0xB559EB1D04E5E932"),BigInt("0xC37B45B3F8D6F2BA"),BigInt("0xC3A9DC228CAAC9E9"),BigInt("0xF3B8B6675A6507FF"),BigInt("0x9FC477DE4ED681DA"),BigInt("0x67378D8ECCEF96CB"),BigInt("0x6DD856D94D259236"),BigInt("0xA319CE15B0B4DB31"),BigInt("0x073973751F12DD5E"),BigInt("0x8A8E849EB32781A5"),BigInt("0xE1925C71285279F5"),BigInt("0x74C04BF1790C0EFE"),BigInt("0x4DDA48153C94938A"),BigInt("0x9D266D6A1CC0542C"),BigInt("0x7440FB816508C4FE"),BigInt("0x13328503DF48229F"),BigInt("0xD6BF7BAEE43CAC40"),BigInt("0x4838D65F6EF6748F"),BigInt("0x1E152328F3318DEA"),BigInt("0x8F8419A348F296BF"),BigInt("0x72C8834A5957B511"),BigInt("0xD7A023A73260B45C"),BigInt("0x94EBC8ABCFB56DAE"),BigInt("0x9FC10D0F989993E0"),BigInt("0xDE68A2355B93CAE6"),BigInt("0xA44CFE79AE538BBE"),BigInt("0x9D1D84FCCE371425"),BigInt("0x51D2B1AB2DDFB636"),BigInt("0x2FD7E4B9E72CD38C"),BigInt("0x65CA5B96B7552210"),BigInt("0xDD69A0D8AB3B546D"),BigInt("0x604D51B25FBF70E2"),BigInt("0x73AA8A564FB7AC9E"),BigInt("0x1A8C1E992B941148"),BigInt("0xAAC40A2703D9BEA0"),BigInt("0x764DBEAE7FA4F3A6"),BigInt("0x1E99B96E70A9BE8B"),BigInt("0x2C5E9DEB57EF4743"),BigInt("0x3A938FEE32D29981"),BigInt("0x26E6DB8FFDF5ADFE"),BigInt("0x469356C504EC9F9D"),BigInt("0xC8763C5B08D1908C"),BigInt("0x3F6C6AF859D80055"),BigInt("0x7F7CC39420A3A545"),BigInt("0x9BFB227EBDF4C5CE"),BigInt("0x89039D79D6FC5C5C"),BigInt("0x8FE88B57305E2AB6"),BigInt("0xA09E8C8C35AB96DE"),BigInt("0xFA7E393983325753"),BigInt("0xD6B6D0ECC617C699"),BigInt("0xDFEA21EA9E7557E3"),BigInt("0xB67C1FA481680AF8"),BigInt("0xCA1E3785A9E724E5"),BigInt("0x1CFC8BED0D681639"),BigInt("0xD18D8549D140CAEA"),BigInt("0x4ED0FE7E9DC91335"),BigInt("0xE4DBF0634473F5D2"),BigInt("0x1761F93A44D5AEFE"),BigInt("0x53898E4C3910DA55"),BigInt("0x734DE8181F6EC39A"),BigInt("0x2680B122BAA28D97"),BigInt("0x298AF231C85BAFAB"),BigInt("0x7983EED3740847D5"),BigInt("0x66C1A2A1A60CD889"),BigInt("0x9E17E49642A3E4C1"),BigInt("0xEDB454E7BADC0805"),BigInt("0x50B704CAB602C329"),BigInt("0x4CC317FB9CDDD023"),BigInt("0x66B4835D9EAFEA22"),BigInt("0x219B97E26FFC81BD"),BigInt("0x261E4E4C0A333A9D"),BigInt("0x1FE2CCA76517DB90"),BigInt("0xD7504DFA8816EDBB"),BigInt("0xB9571FA04DC089C8"),BigInt("0x1DDC0325259B27DE"),BigInt("0xCF3F4688801EB9AA"),BigInt("0xF4F5D05C10CAB243"),BigInt("0x38B6525C21A42B0E"),BigInt("0x36F60E2BA4FA6800"),BigInt("0xEB3593803173E0CE"),BigInt("0x9C4CD6257C5A3603"),BigInt("0xAF0C317D32ADAA8A"),BigInt("0x258E5A80C7204C4B"),BigInt("0x8B889D624D44885D"),BigInt("0xF4D14597E660F855"),BigInt("0xD4347F66EC8941C3"),BigInt("0xE699ED85B0DFB40D"),BigInt("0x2472F6207C2D0484"),BigInt("0xC2A1E7B5B459AEB5"),BigInt("0xAB4F6451CC1D45EC"),BigInt("0x63767572AE3D6174"),BigInt("0xA59E0BD101731A28"),BigInt("0x116D0016CB948F09"),BigInt("0x2CF9C8CA052F6E9F"),BigInt("0x0B090A7560A968E3"),BigInt("0xABEEDDB2DDE06FF1"),BigInt("0x58EFC10B06A2068D"),BigInt("0xC6E57A78FBD986E0"),BigInt("0x2EAB8CA63CE802D7"),BigInt("0x14A195640116F336"),BigInt("0x7C0828DD624EC390"),BigInt("0xD74BBE77E6116AC7"),BigInt("0x804456AF10F5FB53"),BigInt("0xEBE9EA2ADF4321C7"),BigInt("0x03219A39EE587A30"),BigInt("0x49787FEF17AF9924"),BigInt("0xA1E9300CD8520548"),BigInt("0x5B45E522E4B1B4EF"),BigInt("0xB49C3B3995091A36"),BigInt("0xD4490AD526F14431"),BigInt("0x12A8F216AF9418C2"),BigInt("0x001F837CC7350524"),BigInt("0x1877B51E57A764D5"),BigInt("0xA2853B80F17F58EE"),BigInt("0x993E1DE72D36D310"),BigInt("0xB3598080CE64A656"),BigInt("0x252F59CF0D9F04BB"),BigInt("0xD23C8E176D113600"),BigInt("0x1BDA0492E7E4586E"),BigInt("0x21E0BD5026C619BF"),BigInt("0x3B097ADAF088F94E"),BigInt("0x8D14DEDB30BE846E"),BigInt("0xF95CFFA23AF5F6F4"),BigInt("0x3871700761B3F743"),BigInt("0xCA672B91E9E4FA16"),BigInt("0x64C8E531BFF53B55"),BigInt("0x241260ED4AD1E87D"),BigInt("0x106C09B972D2E822"),BigInt("0x7FBA195410E5CA30"),BigInt("0x7884D9BC6CB569D8"),BigInt("0x0647DFEDCD894A29"),BigInt("0x63573FF03E224774"),BigInt("0x4FC8E9560F91B123"),BigInt("0x1DB956E450275779"),BigInt("0xB8D91274B9E9D4FB"),BigInt("0xA2EBEE47E2FBFCE1"),BigInt("0xD9F1F30CCD97FB09"),BigInt("0xEFED53D75FD64E6B"),BigInt("0x2E6D02C36017F67F"),BigInt("0xA9AA4D20DB084E9B"),BigInt("0xB64BE8D8B25396C1"),BigInt("0x70CB6AF7C2D5BCF0"),BigInt("0x98F076A4F7A2322E"),BigInt("0xBF84470805E69B5F"),BigInt("0x94C3251F06F90CF3"),BigInt("0x3E003E616A6591E9"),BigInt("0xB925A6CD0421AFF3"),BigInt("0x61BDD1307C66E300"),BigInt("0xBF8D5108E27E0D48"),BigInt("0x240AB57A8B888B20"),BigInt("0xFC87614BAF287E07"),BigInt("0xEF02CDD06FFDB432"),BigInt("0xA1082C0466DF6C0A"),BigInt("0x8215E577001332C8"),BigInt("0xD39BB9C3A48DB6CF"),BigInt("0x2738259634305C14"),BigInt("0x61CF4F94C97DF93D"),BigInt("0x1B6BACA2AE4E125B"),BigInt("0x758F450C88572E0B"),BigInt("0x959F587D507A8359"),BigInt("0xB063E962E045F54D"),BigInt("0x60E8ED72C0DFF5D1"),BigInt("0x7B64978555326F9F"),BigInt("0xFD080D236DA814BA"),BigInt("0x8C90FD9B083F4558"),BigInt("0x106F72FE81E2C590"),BigInt("0x7976033A39F7D952"),BigInt("0xA4EC0132764CA04B"),BigInt("0x733EA705FAE4FA77"),BigInt("0xB4D8F77BC3E56167"),BigInt("0x9E21F4F903B33FD9"),BigInt("0x9D765E419FB69F6D"),BigInt("0xD30C088BA61EA5EF"),BigInt("0x5D94337FBFAF7F5B"),BigInt("0x1A4E4822EB4D7A59"),BigInt("0x6FFE73E81B637FB3"),BigInt("0xDDF957BC36D8B9CA"),BigInt("0x64D0E29EEA8838B3"),BigInt("0x08DD9BDFD96B9F63"),BigInt("0x087E79E5A57D1D13"),BigInt("0xE328E230E3E2B3FB"),BigInt("0x1C2559E30F0946BE"),BigInt("0x720BF5F26F4D2EAA"),BigInt("0xB0774D261CC609DB"),BigInt("0x443F64EC5A371195"),BigInt("0x4112CF68649A260E"),BigInt("0xD813F2FAB7F5C5CA"),BigInt("0x660D3257380841EE"),BigInt("0x59AC2C7873F910A3"),BigInt("0xE846963877671A17"),BigInt("0x93B633ABFA3469F8"),BigInt("0xC0C0F5A60EF4CDCF"),BigInt("0xCAF21ECD4377B28C"),BigInt("0x57277707199B8175"),BigInt("0x506C11B9D90E8B1D"),BigInt("0xD83CC2687A19255F"),BigInt("0x4A29C6465A314CD1"),BigInt("0xED2DF21216235097"),BigInt("0xB5635C95FF7296E2"),BigInt("0x22AF003AB672E811"),BigInt("0x52E762596BF68235"),BigInt("0x9AEBA33AC6ECC6B0"),BigInt("0x944F6DE09134DFB6"),BigInt("0x6C47BEC883A7DE39"),BigInt("0x6AD047C430A12104"),BigInt("0xA5B1CFDBA0AB4067"),BigInt("0x7C45D833AFF07862"),BigInt("0x5092EF950A16DA0B"),BigInt("0x9338E69C052B8E7B"),BigInt("0x455A4B4CFE30E3F5"),BigInt("0x6B02E63195AD0CF8"),BigInt("0x6B17B224BAD6BF27"),BigInt("0xD1E0CCD25BB9C169"),BigInt("0xDE0C89A556B9AE70"),BigInt("0x50065E535A213CF6"),BigInt("0x9C1169FA2777B874"),BigInt("0x78EDEFD694AF1EED"),BigInt("0x6DC93D9526A50E68"),BigInt("0xEE97F453F06791ED"),BigInt("0x32AB0EDB696703D3"),BigInt("0x3A6853C7E70757A7"),BigInt("0x31865CED6120F37D"),BigInt("0x67FEF95D92607890"),BigInt("0x1F2B1D1F15F6DC9C"),BigInt("0xB69E38A8965C6B65"),BigInt("0xAA9119FF184CCCF4"),BigInt("0xF43C732873F24C13"),BigInt("0xFB4A3D794A9A80D2"),BigInt("0x3550C2321FD6109C"),BigInt("0x371F77E76BB8417E"),BigInt("0x6BFA9AAE5EC05779"),BigInt("0xCD04F3FF001A4778"),BigInt("0xE3273522064480CA"),BigInt("0x9F91508BFFCFC14A"),BigInt("0x049A7F41061A9E60"),BigInt("0xFCB6BE43A9F2FE9B"),BigInt("0x08DE8A1C7797DA9B"),BigInt("0x8F9887E6078735A1"),BigInt("0xB5B4071DBFC73A66"),BigInt("0x230E343DFBA08D33"),BigInt("0x43ED7F5A0FAE657D"),BigInt("0x3A88A0FBBCB05C63"),BigInt("0x21874B8B4D2DBC4F"),BigInt("0x1BDEA12E35F6A8C9"),BigInt("0x53C065C6C8E63528"),BigInt("0xE34A1D250E7A8D6B"),BigInt("0xD6B04D3B7651DD7E"),BigInt("0x5E90277E7CB39E2D"),BigInt("0x2C046F22062DC67D"),BigInt("0xB10BB459132D0A26"),BigInt("0x3FA9DDFB67E2F199"),BigInt("0x0E09B88E1914F7AF"),BigInt("0x10E8B35AF3EEAB37"),BigInt("0x9EEDECA8E272B933"),BigInt("0xD4C718BC4AE8AE5F"),BigInt("0x81536D601170FC20"),BigInt("0x91B534F885818A06"),BigInt("0xEC8177F83F900978"),BigInt("0x190E714FADA5156E"),BigInt("0xB592BF39B0364963"),BigInt("0x89C350C893AE7DC1"),BigInt("0xAC042E70F8B383F2"),BigInt("0xB49B52E587A1EE60"),BigInt("0xFB152FE3FF26DA89"),BigInt("0x3E666E6F69AE2C15"),BigInt("0x3B544EBE544C19F9"),BigInt("0xE805A1E290CF2456"),BigInt("0x24B33C9D7ED25117"),BigInt("0xE74733427B72F0C1"),BigInt("0x0A804D18B7097475"),BigInt("0x57E3306D881EDB4F"),BigInt("0x4AE7D6A36EB5DBCB"),BigInt("0x2D8D5432157064C8"),BigInt("0xD1E649DE1E7F268B"),BigInt("0x8A328A1CEDFE552C"),BigInt("0x07A3AEC79624C7DA"),BigInt("0x84547DDC3E203C94"),BigInt("0x990A98FD5071D263"),BigInt("0x1A4FF12616EEFC89"),BigInt("0xF6F7FD1431714200"),BigInt("0x30C05B1BA332F41C"),BigInt("0x8D2636B81555A786"),BigInt("0x46C9FEB55D120902"),BigInt("0xCCEC0A73B49C9921"),BigInt("0x4E9D2827355FC492"),BigInt("0x19EBB029435DCB0F"),BigInt("0x4659D2B743848A2C"),BigInt("0x963EF2C96B33BE31"),BigInt("0x74F85198B05A2E7D"),BigInt("0x5A0F544DD2B1FB18"),BigInt("0x03727073C2E134B1"),BigInt("0xC7F6AA2DE59AEA61"),BigInt("0x352787BAA0D7C22F"),BigInt("0x9853EAB63B5E0B35"),BigInt("0xABBDCDD7ED5C0860"),BigInt("0xCF05DAF5AC8D77B0"),BigInt("0x49CAD48CEBF4A71E"),BigInt("0x7A4C10EC2158C4A6"),BigInt("0xD9E92AA246BF719E"),BigInt("0x13AE978D09FE5557"),BigInt("0x730499AF921549FF"),BigInt("0x4E4B705B92903BA4"),BigInt("0xFF577222C14F0A3A"),BigInt("0x55B6344CF97AAFAE"),BigInt("0xB862225B055B6960"),BigInt("0xCAC09AFBDDD2CDB4"),BigInt("0xDAF8E9829FE96B5F"),BigInt("0xB5FDFC5D3132C498"),BigInt("0x310CB380DB6F7503"),BigInt("0xE87FBB46217A360E"),BigInt("0x2102AE466EBB1148"),BigInt("0xF8549E1A3AA5E00D"),BigInt("0x07A69AFDCC42261A"),BigInt("0xC4C118BFE78FEAAE"),BigInt("0xF9F4892ED96BD438"),BigInt("0x1AF3DBE25D8F45DA"),BigInt("0xF5B4B0B0D2DEEEB4"),BigInt("0x962ACEEFA82E1C84"),BigInt("0x046E3ECAAF453CE9"),BigInt("0xF05D129681949A4C"),BigInt("0x964781CE734B3C84"),BigInt("0x9C2ED44081CE5FBD"),BigInt("0x522E23F3925E319E"),BigInt("0x177E00F9FC32F791"),BigInt("0x2BC60A63A6F3B3F2"),BigInt("0x222BBFAE61725606"),BigInt("0x486289DDCC3D6780"),BigInt("0x7DC7785B8EFDFC80"),BigInt("0x8AF38731C02BA980"),BigInt("0x1FAB64EA29A2DDF7"),BigInt("0xE4D9429322CD065A"),BigInt("0x9DA058C67844F20C"),BigInt("0x24C0E332B70019B0"),BigInt("0x233003B5A6CFE6AD"),BigInt("0xD586BD01C5C217F6"),BigInt("0x5E5637885F29BC2B"),BigInt("0x7EBA726D8C94094B"),BigInt("0x0A56A5F0BFE39272"),BigInt("0xD79476A84EE20D06"),BigInt("0x9E4C1269BAA4BF37"),BigInt("0x17EFEE45B0DEE640"),BigInt("0x1D95B0A5FCF90BC6"),BigInt("0x93CBE0B699C2585D"),BigInt("0x65FA4F227A2B6D79"),BigInt("0xD5F9E858292504D5"),BigInt("0xC2B5A03F71471A6F"),BigInt("0x59300222B4561E00"),BigInt("0xCE2F8642CA0712DC"),BigInt("0x7CA9723FBB2E8988"),BigInt("0x2785338347F2BA08"),BigInt("0xC61BB3A141E50E8C"),BigInt("0x150F361DAB9DEC26"),BigInt("0x9F6A419D382595F4"),BigInt("0x64A53DC924FE7AC9"),BigInt("0x142DE49FFF7A7C3D"),BigInt("0x0C335248857FA9E7"),BigInt("0x0A9C32D5EAE45305"),BigInt("0xE6C42178C4BBB92E"),BigInt("0x71F1CE2490D20B07"),BigInt("0xF1BCC3D275AFE51A"),BigInt("0xE728E8C83C334074"),BigInt("0x96FBF83A12884624"),BigInt("0x81A1549FD6573DA5"),BigInt("0x5FA7867CAF35E149"),BigInt("0x56986E2EF3ED091B"),BigInt("0x917F1DD5F8886C61"),BigInt("0xD20D8C88C8FFE65F"),BigInt("0x31D71DCE64B2C310"),BigInt("0xF165B587DF898190"),BigInt("0xA57E6339DD2CF3A0"),BigInt("0x1EF6E6DBB1961EC9"),BigInt("0x70CC73D90BC26E24"),BigInt("0xE21A6B35DF0C3AD7"),BigInt("0x003A93D8B2806962"),BigInt("0x1C99DED33CB890A1"),BigInt("0xCF3145DE0ADD4289"),BigInt("0xD0E4427A5514FB72"),BigInt("0x77C621CC9FB3A483"),BigInt("0x67A34DAC4356550B"),BigInt("0xF8D626AAAF278509")],e.polyglot_key=function(t){let i,n=0,B=0,E=0n,_=A.PIECES.EMPTY,I=0;for(i=0;i<r.BOARD_SQUARE_NUM;++i)_=t.pieces[i],A.SQUARE_ON_BOARD(i)&&_!==A.PIECES.EMPTY&&(I=r.get_poly_piece[_],n=r.ranks_board[i],B=r.files_board[i],E^=e.random64_poly[e.random_piece+64*I+8*n+B]);return t.castling_right&A.CASTLING.WHITE_CASTLE_OO&&(E^=e.random64_poly[e.random_castle+0]),t.castling_right&A.CASTLING.WHITE_CASTLE_OOO&&(E^=e.random64_poly[e.random_castle+1]),t.castling_right&A.CASTLING.BLACK_CASTLE_OO&&(E^=e.random64_poly[e.random_castle+2]),t.castling_right&A.CASTLING.BLACK_CASTLE_OOO&&(E^=e.random64_poly[e.random_castle+3]),function(t){let e=0;const i=t.turn===A.COLORS.WHITE?A.PIECES.WHITEPAWN:A.PIECES.BLACKPAWN;return t.enpassant!==A.SQUARES.OFF_SQUARE&&(e=t.turn===A.COLORS.WHITE?t.enpassant-10:t.enpassant+10,t.pieces[e+1]===i||t.pieces[e-1]===i)}(t)&&(B=r.files_board[t.enpassant],E^=e.random64_poly[e.random_enpass+B]),t.turn===A.COLORS.WHITE&&(E^=e.random64_poly[e.random_turn]),E}},9:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),B=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),E=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&n(e,t,i);return B(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.take_move=e.make_move=e.move_piece=e.add_piece=e.clear_pieces=e.generate_legal_moves=e.generate_all_moves=e.san_to_move=e.move_to_san=e.move_to_verbose_move=e.move_to_smith=e.smith_to_move=e.NO_MOVE=void 0;const A=E(i(596)),r=E(i(54)),_=E(i(520)),I=E(i(697)),C=E(i(971)),o=262144,a=524288,g=16777216,s=507904,F=15728640;e.NO_MOVE=0;const c=[0,0,4,8,4,8,8,0,4,8,4,8,8],D=[r.PIECES.WHITEBISHOP,r.PIECES.WHITEROOK,r.PIECES.WHITEQUEEN,-1,r.PIECES.BLACKBISHOP,r.PIECES.BLACKROOK,r.PIECES.BLACKQUEEN,-1],x=[r.PIECES.WHITEKNIGHT,r.PIECES.WHITEKING,-1,r.PIECES.BLACKKNIGHT,r.PIECES.BLACKKING,-1],S=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[-9,-11,11,9,0,0,0,0],[-8,-19,-21,-12,8,19,21,12],[-1,-10,1,10,0,0,0,0],[-1,-10,1,10,-9,-11,11,9],[-1,-10,1,10,-9,-11,11,9],[0,0,0,0,0,0,0],[-9,-11,11,9,0,0,0,0],[-8,-19,-21,-12,8,19,21,12],[-1,-10,1,10,0,0,0,0],[-1,-10,1,10,-9,-11,11,9],[-1,-10,1,10,-9,-11,11,9]];function l(t,e,i,n,B){return t|e<<7|i<<14|n<<20|B}function u(t){return 127&t}function p(t){return t>>7&127}function O(t){return t>>14&15}function T(t){return t>>20&15}function f(t){if(t!=e.NO_MOVE){const e=A.files_board[u(t)],i=A.ranks_board[u(t)],n=A.files_board[p(t)],B=A.ranks_board[p(t)],E=T(t);let r=String.fromCharCode("a".charCodeAt(0)+e)+String.fromCharCode("1".charCodeAt(0)+i)+String.fromCharCode("a".charCodeAt(0)+n)+String.fromCharCode("1".charCodeAt(0)+B);if(E){let t="q";A.is_knight[E]?t="n":A.is_rook_or_queen[E]&&!A.is_bishop_or_queen[E]?t="r":!A.is_rook_or_queen[E]&&A.is_bishop_or_queen[E]&&(t="b"),r+=t}return r}return""}function R(t,e,i=!0){let n="";const B=u(t),E=p(t);if(r.SQUARE_ON_BOARD(B)&&r.SQUARE_ON_BOARD(E))if(0!=(t&g))switch(E){case r.SQUARES.C1:case r.SQUARES.C8:n="O-O-O";break;case r.SQUARES.G1:case r.SQUARES.G8:n="O-O"}else{const I=function(t,e){let i="";const n=N(e),B=u(t),E=p(t),_=e.pieces[B];let I,C,o,a,g,s=0,F=0,c=0;for(I=0;I<n.length;++I)C=n[I].move,o=u(C),a=p(C),g=e.pieces[o],_===g&&B!==o&&E===a&&(s++,A.ranks_board[B]===A.ranks_board[o]&&F++,A.files_board[B]===A.files_board[o]&&c++);return s>0&&(i+=F>0&&c>0?r.square_to_algebraic(u(t)):c>0?r.square_to_algebraic(B).charAt(1):r.square_to_algebraic(B).charAt(0)),i}(t,e);A.is_pawn[e.pieces[B]]||(n+=A.piece_to_ascii[e.pieces[B]].toUpperCase(),n+=I),0!=(507904&t)&&(A.is_pawn[e.pieces[B]]&&(n+=String.fromCharCode("a".charCodeAt(0)+A.files_board[B])),n+="x"),n+=r.square_to_algebraic(E),0!=(t&F)&&(n+="=",n+=A.piece_to_ascii[T(t)].toUpperCase()),i&&(0!=(t&o)&&(n+="e.p."),Q(t,e)&&(_.in_checkmate(e)?n+="#":_.in_check(e)&&(n+="+"),U(e)))}return n}function m(t,e){e.push({move:t,score:0})}function d(t,e){e.push({move:t,score:1e6})}function P(t,e){e.push({move:t,score:1000105})}function h(t,e,i,n){A.ranks_board[t]==r.RANKS.SEVENTH_RANK?(d(l(t,e,i,r.PIECES.WHITEQUEEN,0),n),d(l(t,e,i,r.PIECES.WHITEROOK,0),n),d(l(t,e,i,r.PIECES.WHITEBISHOP,0),n),d(l(t,e,i,r.PIECES.WHITEKNIGHT,0),n)):d(l(t,e,i,r.PIECES.EMPTY,0),n)}function L(t,e,i){A.ranks_board[t]==r.RANKS.SEVENTH_RANK?(m(l(t,e,r.PIECES.EMPTY,r.PIECES.WHITEQUEEN,0),i),m(l(t,e,r.PIECES.EMPTY,r.PIECES.WHITEROOK,0),i),m(l(t,e,r.PIECES.EMPTY,r.PIECES.WHITEBISHOP,0),i),m(l(t,e,r.PIECES.EMPTY,r.PIECES.WHITEKNIGHT,0),i)):m(l(t,e,r.PIECES.EMPTY,r.PIECES.EMPTY,0),i)}function b(t,e,i,n){A.ranks_board[t]===r.RANKS.SECOND_RANK?(d(l(t,e,i,r.PIECES.BLACKQUEEN,0),n),d(l(t,e,i,r.PIECES.BLACKROOK,0),n),d(l(t,e,i,r.PIECES.BLACKBISHOP,0),n),d(l(t,e,i,r.PIECES.BLACKKNIGHT,0),n)):d(l(t,e,i,r.PIECES.EMPTY,0),n)}function H(t,e,i){A.ranks_board[t]===r.RANKS.SECOND_RANK?(m(l(t,e,r.PIECES.EMPTY,r.PIECES.BLACKQUEEN,0),i),m(l(t,e,r.PIECES.EMPTY,r.PIECES.BLACKROOK,0),i),m(l(t,e,r.PIECES.EMPTY,r.PIECES.BLACKBISHOP,0),i),m(l(t,e,r.PIECES.EMPTY,r.PIECES.BLACKKNIGHT,0),i)):m(l(t,e,r.PIECES.EMPTY,r.PIECES.EMPTY,0),i)}function N(t,e=!1,i=r.SQUARES.ALL){const n=[];return t.turn===r.COLORS.WHITE?function(t,e,i=!1,n=r.SQUARES.ALL){for(let B=0;B<t.number_pieces[r.PIECES.WHITEPAWN];B++){const E=t.piece_list[r.PIECE_INDEX(r.PIECES.WHITEPAWN,B)];n!==r.SQUARES.ALL&&n!==E||(t.pieces[E+10]!==r.PIECES.EMPTY||i||(L(E,E+10,e),A.ranks_board[E]===r.RANKS.SECOND_RANK&&t.pieces[E+20]===r.PIECES.EMPTY&&m(l(E,E+20,r.PIECES.EMPTY,r.PIECES.EMPTY,a),e)),r.SQUARE_ON_BOARD(E+9)&&A.get_color_piece[t.pieces[E+9]]===r.COLORS.BLACK&&h(E,E+9,t.pieces[E+9],e),r.SQUARE_ON_BOARD(E+11)&&A.get_color_piece[t.pieces[E+11]]===r.COLORS.BLACK&&h(E,E+11,t.pieces[E+11],e),t.enpassant!==r.SQUARES.OFF_SQUARE&&(E+9===t.enpassant&&P(l(E,E+9,r.PIECES.EMPTY,r.PIECES.EMPTY,o),e),E+11===t.enpassant&&P(l(E,E+11,r.PIECES.EMPTY,r.PIECES.EMPTY,o),e)))}n!==r.SQUARES.ALL&&n!==t.king_square[r.COLORS.WHITE]||(0==(t.castling_right&r.CASTLING.WHITE_CASTLE_OO)||i||t.pieces[r.SQUARES.F1]!==r.PIECES.EMPTY||t.pieces[r.SQUARES.G1]!==r.PIECES.EMPTY||C.is_square_attacked(r.SQUARES.E1,r.COLORS.BLACK,t)||C.is_square_attacked(r.SQUARES.F1,r.COLORS.BLACK,t)||m(l(r.SQUARES.E1,r.SQUARES.G1,r.PIECES.EMPTY,r.PIECES.EMPTY,g),e),0==(t.castling_right&r.CASTLING.WHITE_CASTLE_OOO)||i||t.pieces[r.SQUARES.D1]!==r.PIECES.EMPTY||t.pieces[r.SQUARES.C1]!==r.PIECES.EMPTY||t.pieces[r.SQUARES.B1]!==r.PIECES.EMPTY||C.is_square_attacked(r.SQUARES.E1,r.COLORS.BLACK,t)||C.is_square_attacked(r.SQUARES.D1,r.COLORS.BLACK,t)||m(l(r.SQUARES.E1,r.SQUARES.C1,r.PIECES.EMPTY,r.PIECES.EMPTY,g),e))}(t,n,e,i):function(t,e,i=!1,n=r.SQUARES.ALL){for(let B=0;B<t.number_pieces[r.PIECES.BLACKPAWN];B++){const E=t.piece_list[r.PIECE_INDEX(r.PIECES.BLACKPAWN,B)];n!==r.SQUARES.ALL&&n!==E||(t.pieces[E-10]!==r.PIECES.EMPTY||i||(H(E,E-10,e),A.ranks_board[E]===r.RANKS.SEVENTH_RANK&&t.pieces[E-20]===r.PIECES.EMPTY&&m(l(E,E-20,r.PIECES.EMPTY,r.PIECES.EMPTY,a),e)),r.SQUARE_ON_BOARD(E-9)&&A.get_color_piece[t.pieces[E-9]]===r.COLORS.WHITE&&b(E,E-9,t.pieces[E-9],e),r.SQUARE_ON_BOARD(E-11)&&A.get_color_piece[t.pieces[E-11]]===r.COLORS.WHITE&&b(E,E-11,t.pieces[E-11],e),t.enpassant!==r.SQUARES.OFF_SQUARE&&(E-9===t.enpassant&&P(l(E,E-9,r.PIECES.EMPTY,r.PIECES.EMPTY,o),e),E-11===t.enpassant&&P(l(E,E-11,r.PIECES.EMPTY,r.PIECES.EMPTY,o),e)))}n!==r.SQUARES.ALL&&n!==t.king_square[r.COLORS.BLACK]||(0==(t.castling_right&r.CASTLING.BLACK_CASTLE_OO)||i||t.pieces[r.SQUARES.F8]!==r.PIECES.EMPTY||t.pieces[r.SQUARES.G8]!==r.PIECES.EMPTY||C.is_square_attacked(r.SQUARES.E8,r.COLORS.WHITE,t)||C.is_square_attacked(r.SQUARES.F8,r.COLORS.WHITE,t)||m(l(r.SQUARES.E8,r.SQUARES.G8,r.PIECES.EMPTY,r.PIECES.EMPTY,g),e),0==(t.castling_right&r.CASTLING.BLACK_CASTLE_OOO)||i||t.pieces[r.SQUARES.D8]!==r.PIECES.EMPTY||t.pieces[r.SQUARES.C8]!==r.PIECES.EMPTY||t.pieces[r.SQUARES.B8]!==r.PIECES.EMPTY||C.is_square_attacked(r.SQUARES.E8,r.COLORS.WHITE,t)||C.is_square_attacked(r.SQUARES.D8,r.COLORS.WHITE,t)||m(l(r.SQUARES.E8,r.SQUARES.C8,r.PIECES.EMPTY,r.PIECES.EMPTY,g),e))}(t,n,e,i),function(t,e,i=!1,n=r.SQUARES.ALL){const B=t.turn;let E=4*B,_=D[E++];for(;-1!==_;){for(let E=0;E<t.number_pieces[_];++E){const I=t.piece_list[r.PIECE_INDEX(_,E)];if(n===r.SQUARES.ALL||n===I&&r.SQUARE_ON_BOARD(I))for(let n=0;n<c[_];n++){const E=S[_][n];let C=I+E;for(;r.SQUARE_ON_BOARD(C);){if(t.pieces[C]!==r.PIECES.EMPTY){A.get_color_piece[t.pieces[C]]===(1^B)&&d(l(I,C,t.pieces[C],r.PIECES.EMPTY,0),e);break}i||m(l(I,C,r.PIECES.EMPTY,r.PIECES.EMPTY,0),e),C+=E}}}_=D[E++]}}(t,n,e,i),function(t,e,i=!1,n=r.SQUARES.ALL){const B=t.turn;let E=3*B,_=x[E++];for(;-1!==_;){for(let E=0;E<t.number_pieces[_];++E){const I=t.piece_list[r.PIECE_INDEX(_,E)];if(n===r.SQUARES.ALL||n===I&&r.SQUARE_ON_BOARD(I))for(let n=0;n<c[_];n++){const E=I+S[_][n];r.SQUARE_ON_BOARD(E)&&(t.pieces[E]===r.PIECES.EMPTY?i||m(l(I,E,r.PIECES.EMPTY,r.PIECES.EMPTY,0),e):A.get_color_piece[t.pieces[E]]===(1^B)&&d(l(I,E,t.pieces[E],r.PIECES.EMPTY,0),e))}}_=x[E++]}}(t,n,e,i),n}function K(t,e=!1,i=r.SQUARES.ALL){const n=N(t,e,i),B=[];let E;for(E of n)Q(E.move,t)&&(B.push(E),U(t));return B}function y(t,e){if(r.SQUARE_ON_BOARD(t)){const i=e.pieces[t],n=A.get_color_piece[i];let B,E=-1;for(e.pieces[t]=r.PIECES.EMPTY,e.material_mg[n]-=A.get_value_piece[A.PHASE.MG][i],e.material_eg[n]-=A.get_value_piece[A.PHASE.EG][i],A.is_big_piece[i]?(e.number_big_pieces[n]--,A.is_major_piece[i]?e.number_major_pieces[n]--:e.number_minor_pieces[n]--):(e.pawns[n]=A.CLEAR_BIT(e.pawns[n],r.SQ64(t)),e.pawns[r.COLORS.BOTH]=A.CLEAR_BIT(e.pawns[r.COLORS.BOTH],r.SQ64(t))),B=0;B<e.number_pieces[i];++B)if(e.piece_list[r.PIECE_INDEX(i,B)]===t){E=B;break}e.number_pieces[i]--,e.piece_list[r.PIECE_INDEX(i,E)]=e.piece_list[r.PIECE_INDEX(i,e.number_pieces[i])],e.current_polyglot_key^=I.random64_poly[I.random_piece+64*A.get_poly_piece[i]+r.SQ64(t)]}}function v(t,e,i){if(r.SQUARE_ON_BOARD(t)&&r.IS_VALID_PIECE(e)){const n=A.get_color_piece[e],B=A.get_poly_piece[e];i.pieces[t]=e,A.is_big_piece[e]?(i.number_big_pieces[n]++,A.is_major_piece[e]?i.number_major_pieces[n]++:i.number_minor_pieces[n]++):(i.pawns[n]=A.SET_BIT(i.pawns[n],r.SQ64(t)),i.pawns[r.COLORS.BOTH]=A.SET_BIT(i.pawns[r.COLORS.BOTH],r.SQ64(t))),i.material_eg[n]+=A.get_value_piece[A.PHASE.EG][e],i.material_mg[n]+=A.get_value_piece[A.PHASE.MG][e],i.piece_list[r.PIECE_INDEX(e,i.number_pieces[e]++)]=t,i.current_polyglot_key^=I.random64_poly[I.random_piece+64*B+r.SQ64(t)]}}function W(t,e,i){let n=!1;if(r.SQUARE_ON_BOARD(t)&&r.SQUARE_ON_BOARD(e)){const B=i.pieces[t],E=A.get_color_piece[B];i.pieces[t]=r.PIECES.EMPTY,i.pieces[e]=B,A.is_big_piece[B]||(i.pawns[E]=A.CLEAR_BIT(i.pawns[E],r.SQ64(t)),i.pawns[r.COLORS.BOTH]=A.CLEAR_BIT(i.pawns[r.COLORS.BOTH],r.SQ64(t)),i.pawns[E]=A.SET_BIT(i.pawns[E],r.SQ64(e)),i.pawns[r.COLORS.BOTH]=A.SET_BIT(i.pawns[r.COLORS.BOTH],r.SQ64(e)));for(let E=0;E<i.number_pieces[B];++E)if(i.piece_list[r.PIECE_INDEX(B,E)]===t){i.piece_list[r.PIECE_INDEX(B,E)]=e,n=!0;break}const _=I.random_piece+64*A.get_poly_piece[B];i.current_polyglot_key^=I.random64_poly[_+r.SQ64(t)]^I.random64_poly[_+r.SQ64(e)]}return n}function Q(t,i){if(t===e.NO_MOVE)return!1;const n=u(t),B=p(t),E=i.turn,_=1^E,s={};s.current_polyglot_key=i.current_polyglot_key,s.turn=i.turn,s.move=t,s.half_moves=i.half_moves,s.history_ply=i.history_ply,s.ply=i.ply,s.enpassant=i.enpassant,s.castling_right=i.castling_right,s.material_eg=i.material_eg,s.material_mg=i.material_mg,i.turn=_,i.current_polyglot_key^=I.random64_poly[I.random_turn];const F=i.castling_right,c=F&A.castle_permission[n]&A.castle_permission[B];if(i.castling_right=c,i.current_polyglot_key^=A.castle64_hash[F^c],i.enpassant!==r.SQUARES.OFF_SQUARE&&(i.current_polyglot_key^=I.random64_poly[I.random_enpass+A.files_board[i.enpassant]],i.enpassant=r.SQUARES.OFF_SQUARE),i.move_history[i.history_ply]=s,i.history_ply++,i.ply++,i.full_moves+=E===r.COLORS.BLACK?1:0,A.is_pawn[i.pieces[n]])i.half_moves=0,0!=(t&o)?E===r.COLORS.WHITE?y(B-10,i):y(B+10,i):0!=(t&a)&&(r.SQUARE_ON_BOARD(B-1)&&A.is_color_pawn[_][i.pieces[B-1]]||r.SQUARE_ON_BOARD(B+1)&&A.is_color_pawn[_][i.pieces[B+1]])&&(E===r.COLORS.WHITE?i.enpassant=n+10:i.enpassant=n-10,i.current_polyglot_key^=I.random64_poly[I.random_enpass+A.files_board[i.enpassant]]);else if(0!=(t&g))switch(B){case r.SQUARES.C1:W(r.SQUARES.A1,r.SQUARES.D1,i);break;case r.SQUARES.C8:W(r.SQUARES.A8,r.SQUARES.D8,i);break;case r.SQUARES.G1:W(r.SQUARES.H1,r.SQUARES.F1,i);break;case r.SQUARES.G8:W(r.SQUARES.H8,r.SQUARES.F8,i);break;default:return i.current_polyglot_key=s.current_polyglot_key,!1}const D=O(t);i.half_moves++,D!==r.PIECES.EMPTY&&(y(B,i),i.half_moves=0),W(n,B,i);const x=T(t);return x!==r.PIECES.EMPTY&&(y(B,i),v(B,x,i)),A.is_king[i.pieces[B]]&&(i.king_square[E]=B),!C.is_square_attacked(i.king_square[E],_,i)||(U(i),!1)}function U(t){if(0===t.history_ply)return!1;t.history_ply--,t.ply--,t.full_moves-=t.turn===r.COLORS.WHITE?1:0;const e=t.move_history[t.history_ply].move,i=u(e),n=p(e);if(t.turn^=1,0!=(o&e))t.turn===r.COLORS.WHITE?v(n-10,r.PIECES.BLACKPAWN,t):v(n+10,r.PIECES.WHITEPAWN,t);else if(0!=(g&e))switch(n){case r.SQUARES.C1:W(r.SQUARES.D1,r.SQUARES.A1,t);break;case r.SQUARES.C8:W(r.SQUARES.D8,r.SQUARES.A8,t);break;case r.SQUARES.G1:W(r.SQUARES.F1,r.SQUARES.H1,t);break;case r.SQUARES.G8:W(r.SQUARES.F8,r.SQUARES.H8,t)}W(n,i,t),A.is_king[t.pieces[i]]&&(t.king_square[t.turn]=i);const B=O(e);return B!==r.PIECES.EMPTY&&v(n,B,t),T(e)!==r.PIECES.EMPTY&&(y(i,t),v(i,A.get_color_piece[T(e)]===r.COLORS.WHITE?r.PIECES.WHITEPAWN:r.PIECES.BLACKPAWN,t)),t.current_polyglot_key=t.move_history[t.history_ply].current_polyglot_key,t.turn=t.move_history[t.history_ply].turn,t.castling_right=t.move_history[t.history_ply].castling_right,t.half_moves=t.move_history[t.history_ply].half_moves,t.enpassant=t.move_history[t.history_ply].enpassant,t.turn=t.move_history[t.history_ply].turn,t.material_eg=t.move_history[t.history_ply].material_eg,t.material_mg=t.move_history[t.history_ply].material_mg,!0}e.smith_to_move=function(t,i){const n=function(t){let e="";const i=/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/.exec(t);if(i){const t=i[2],n=i[3],B=i[4];e+=t+n,void 0!==B&&(e+=B)}return e}(t);if(""!=n){if(n[1].charCodeAt(0)>"8".charCodeAt(0)||n[1].charCodeAt(0)<"1".charCodeAt(0))return e.NO_MOVE;if(n[3].charCodeAt(0)>"8".charCodeAt(0)||n[3].charCodeAt(0)<"1".charCodeAt(0))return e.NO_MOVE;if(n[0].charCodeAt(0)>"h".charCodeAt(0)||n[0].charCodeAt(0)<"a".charCodeAt(0))return e.NO_MOVE;if(n[2].charCodeAt(0)>"h".charCodeAt(0)||n[2].charCodeAt(0)<"a".charCodeAt(0))return e.NO_MOVE;const t=r.FILE_RANK_TO_SQUARE(n[0].charCodeAt(0)-"a".charCodeAt(0),n[1].charCodeAt(0)-"1".charCodeAt(0)),B=r.FILE_RANK_TO_SQUARE(n[2].charCodeAt(0)-"a".charCodeAt(0),n[3].charCodeAt(0)-"1".charCodeAt(0));if(r.SQUARE_ON_BOARD(t)&&r.SQUARE_ON_BOARD(B)){const e=K(i);for(let i=0;i<e.length;i++){const E=e[i].move;if(u(E)===t&&p(E)===B){const t=T(E);if(t!==r.PIECES.EMPTY){if(n[4]===A.piece_to_ascii[t].toLowerCase()||n[4]===A.piece_to_ascii[t].toUpperCase())return E;continue}return E}}}}return e.NO_MOVE},e.move_to_smith=f,e.move_to_verbose_move=function(t,i){const n={};if(t!==e.NO_MOVE){const e=u(t),B=p(t);n.from=r.square_to_algebraic(e),n.to=r.square_to_algebraic(B),n.color="wb-"[i.turn],n.pieces=A.piece_to_ascii[i.pieces[e]].toLowerCase(),n.flag="",0!=(t&F)&&(n.flag+="p",n.promoted=A.piece_to_ascii[T(t)].toLowerCase()),0!=(t&s)&&(n.flag+="c",n.captured=A.piece_to_ascii[O(t)].toLowerCase()),0!=(t&o)&&(n.flag+="e"),0!=(t&g)&&(B===r.SQUARES.G8||B===r.SQUARES.G1?n.flag+="k":n.flag+="q"),0!=(t&a)&&(n.flag+="b"),n.flag+=""===n.flag?"n":"",n.smith=f(t),n.san=R(t,i)}return n},e.move_to_san=R,e.san_to_move=function(t,i){const n=t.replace(/[+#]?[?!]*$/,"").replace(/e.p./,""),B=K(i);let E;for(E of B)if(n==R(E.move,i,!1))return E.move;return e.NO_MOVE},e.generate_all_moves=N,e.generate_legal_moves=K,e.clear_pieces=y,e.add_piece=v,e.move_piece=W,e.make_move=Q,e.take_move=U},830:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),B=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),E=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&n(e,t,i);return B(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.perft=void 0;const A=E(i(9));e.perft=function t(e,i){let n=0n;if(0===e)return 1n;const B=A.generate_legal_moves(i);for(const E of B)A.make_move(E.move,i),n+=t(e-1,i),A.take_move(i);return n}},520:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),B=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),E=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&n(e,t,i);return B(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.game_over=e.in_draw=e.insufficient_material=e.in_threefold_repetition=e.in_stalemate=e.in_checkmate=e.in_check=void 0;const A=E(i(54)),r=E(i(971)),_=E(i(9));function I(t){return r.is_square_attacked(t.king_square[t.turn],1^t.turn,t)}function C(t){const e=I(t),i=_.generate_legal_moves(t);return e&&0===i.length}function o(t){const e=I(t),i=_.generate_legal_moves(t);return!e&&0===i.length}function a(t){let e=0;for(let i=0;i<t.history_ply;i++){if(e>=3)return!0;t.current_polyglot_key===t.move_history[i].current_polyglot_key&&e++}return e>=2}function g(t){return!(t.number_pieces[A.PIECES.WHITEPAWN]||t.number_pieces[A.PIECES.BLACKPAWN]||t.number_pieces[A.PIECES.WHITEQUEEN]||t.number_pieces[A.PIECES.BLACKQUEEN]||t.number_pieces[A.PIECES.WHITEROOK]||t.number_pieces[A.PIECES.BLACKROOK]||t.number_pieces[A.PIECES.WHITEBISHOP]>1||t.number_pieces[A.PIECES.BLACKBISHOP]>1||t.number_pieces[A.PIECES.WHITEKNIGHT]>1||t.number_pieces[A.PIECES.BLACKKNIGHT]>1||t.number_pieces[A.PIECES.WHITEKNIGHT]&&t.number_pieces[A.PIECES.WHITEBISHOP]||t.number_pieces[A.PIECES.BLACKBISHOP]&&t.number_pieces[A.PIECES.BLACKKNIGHT])}function s(t){return t.half_moves>=100&&0!==t.ply||g(t)||a(t)||o(t)}e.in_check=I,e.in_checkmate=C,e.in_stalemate=o,e.in_threefold_repetition=a,e.insufficient_material=g,e.in_draw=s,e.game_over=function(t){return C(t)||s(t)}},101:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),B=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),E=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&n(e,t,i);return B(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Raccoon=void 0;const A=E(i(596)),r=E(i(54)),_=E(i(830)),I=E(i(697)),C=E(i(520)),o=E(i(9)),a=E(i(406)),g=E(i(616));e.Raccoon=class{constructor(t){A.initialize_game(),this.board={pieces:new Array(A.BOARD_SQUARE_NUM),king_square:new Array(2),pawns:new Array(3),enpassant:r.SQUARES.OFF_SQUARE,turn:r.COLORS.BOTH,half_moves:0,full_moves:0,castling_right:0,ply:0,history_ply:0,current_polyglot_key:0n,material_eg:new Array(2),material_mg:new Array(2),number_pieces:new Array(13),number_big_pieces:new Array(2),number_major_pieces:new Array(2),number_minor_pieces:new Array(2),piece_list:new Array(130),move_history:new Array(A.MAX_MOVES)},this.moves_history=[],this.start_fen=void 0!==t&&"start_fen"in t?t.start_fen:A.START_FEN,r.fen_to_board(this.start_fen,this.board)}load_fen(t){try{r.fen_to_board(t,this.board)}catch(t){return{value:!1,error:t.message}}return this.start_fen=t,this.moves_history=[],{value:!0,error:"No error!"}}get_fen(){return r.board_to_fen(this.board)}get_polyglot(t=!1){return t?this.board.current_polyglot_key:I.polyglot_key(this.board)}print_board(t=!1,e={pieces:["P","B","N","R","Q","K","p","b","n","r","q","k"],light_square:"-",dark_square:"="}){return r.board_to_printable(this.board,e.pieces,e.light_square,e.dark_square,t)}clear_board(){r.clear_board(this.board),this.moves_history=[]}get_board(){return r.board_to_position_t(this.board)}reset_board(){r.fen_to_board(this.start_fen,this.board),this.moves_history=[]}flip_board(){r.mirror_board(this.board)}make_move(t){let e=o.NO_MOVE;if("string"==typeof t)e=o.smith_to_move(t,this.board),e===o.NO_MOVE&&(e=o.san_to_move(t,this.board));else{let i=t.from+t.to;"promotion"in t&&(i+=t.promotion),e=o.smith_to_move(i,this.board)}const i=o.move_to_verbose_move(e,this.board);return o.make_move(e,this.board)?(this.moves_history.push(i),i):null}undo_move(){return o.take_move(this.board)?this.moves_history.pop():null}get_moves(t){const e=void 0!==t&&"square"in t?r.algebraic_to_square(t.square):r.SQUARES.ALL,i=void 0!==t&&"verbose"in t&&t.verbose,n=void 0!==t&&"capture_only"in t&&t.capture_only,B=o.generate_legal_moves(this.board,n,e),E=[],A=[];for(const t of B){const e=o.move_to_verbose_move(t.move,this.board);i?A.push(e):E.push(e.san)}return i?A:E}move_history(t){const e=void 0!==t&&"verbose"in t&&t.verbose,i=this.moves_history;return e?i:i.map((t=>t.san))}in_check(){return C.in_check(this.board)}in_checkmate(){return C.in_checkmate(this.board)}in_stalemate(){return C.in_stalemate(this.board)}in_threefold_repetition(){return C.in_threefold_repetition(this.board)}insufficient_material(){return C.insufficient_material(this.board)}in_draw(){return C.in_draw(this.board)}game_over(){return C.game_over(this.board)}peek_piece(t,e=!1){const i=r.algebraic_to_square(t);let n;return r.SQUARE_ON_BOARD(i)&&this.board.pieces[i]!==r.PIECES.EMPTY?(n={type:A.piece_to_ascii[this.board.pieces[i]].toLowerCase(),color:A.get_color_piece[this.board.pieces[i]]===r.COLORS.WHITE?"w":"b"},e&&o.clear_pieces(i,this.board),n):null}get_piece(t){return this.peek_piece(t)}pop_piece(t){return this.peek_piece(t,!0)}set_piece(t,e){const i=r.algebraic_to_square(e);if(i===r.SQUARES.OFF_BOARD)return!1;if(!"wb".includes(t.color))return!1;const n="w"===t.color?t.type.toUpperCase():t.type.toLowerCase();let B=r.PIECES.OFF_BOARD_PIECE;for(let t=r.PIECES.EMPTY;t<r.PIECES.OFF_BOARD_PIECE;t++)if(n===A.piece_to_ascii[t]){B=t;break}return!(B===r.PIECES.OFF_BOARD_PIECE||(B===r.PIECES.WHITEKING||B===r.PIECES.BLACKKING)&&this.board.number_pieces[B]>0&&this.board.king_square[A.get_color_piece[B]]!==i||(o.add_piece(i,B,this.board),0))}get_turn(){return"wb-"[this.board.turn]}square_color(t){const e=r.algebraic_to_square(t);return r.SQUARE_ON_BOARD(e)?(A.ranks_board[e]+A.files_board[e])%2==0?"dark":"light":null}evaluate_board(t){return t&&t.use_nnue?a.raccoonZero_evaluate(this.board):g.raccoon_evaluate(this.board)}perft(t){return _.perft(t,this.board)}}},596:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),B=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),E=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&n(e,t,i);return B(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.get_time_ms=e.initialize_game=e.ranks_board=e.files_board=e.flip=e.is_color_pawn=e.is_color_queen=e.is_color_rook=e.is_color_knight=e.is_color_bishop=e.get_poly_piece=e.get_value_piece=e.get_color_piece=e.color_pieceflip=e.is_white_piece=e.is_slide_piece=e.is_bishop_or_queen=e.is_rook_or_queen=e.is_rook=e.is_queen=e.is_king=e.is_bishop=e.is_knight=e.is_pawn=e.is_minor_piece=e.is_major_piece=e.is_big_piece=e.castle64_hash=e.piece_to_unicode=e.piece_to_ascii=e.castle_permission=e.square120_to_square64=e.square64_to_square120=e.ISKthBIT_SET=e.CLEAR_BIT=e.SET_BIT=e.COUNT_BITS=e.ASSERT=e.PHASE=e.MAX_DEPTH=e.BOARD_SQUARE_NUM=e.MAX_MOVES_POSITION=e.MAX_MOVES=e.INFINITE=e.CHECKMATE=e.NAME=e.START_FEN=void 0;const A=E(i(54)),r=E(i(697));var _;e.START_FEN="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",e.NAME="rcSigma",e.CHECKMATE=32e3,e.INFINITE=32001,e.MAX_MOVES=2048,e.MAX_MOVES_POSITION=256,e.BOARD_SQUARE_NUM=120,e.MAX_DEPTH=64,(_=e.PHASE||(e.PHASE={}))[_.MG=0]="MG",_[_.EG=1]="EG",e.ASSERT=function(t,e){if(!t)throw new Error(e)},e.COUNT_BITS=function(t){let e=0;for(;t;)e++,t&=t-1n;return e},e.SET_BIT=function(t,e){return t|1n<<BigInt(e)},e.CLEAR_BIT=function(t,e){return t&~(1n<<BigInt(e))},e.ISKthBIT_SET=function(t,e){return 1n===(t>>BigInt(e)&1n)},e.square64_to_square120=new Array(64),e.square120_to_square64=new Array(e.BOARD_SQUARE_NUM),e.castle_permission=new Array(120),e.piece_to_ascii=".PBNRQKpbnrqk",e.piece_to_unicode=["","","","","","","","","","","","",""],e.castle64_hash=[0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n],e.is_big_piece=[!1,!1,!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0],e.is_major_piece=[!1,!1,!1,!1,!0,!0,!0,!1,!1,!1,!0,!0,!0],e.is_minor_piece=[!1,!1,!0,!0,!1,!1,!1,!1,!0,!0,!1,!1,!1],e.is_pawn=[!1,!0,!1,!1,!1,!1,!1,!0,!1,!1,!1,!1,!1],e.is_knight=[!1,!1,!1,!0,!1,!1,!1,!1,!1,!0,!1,!1,!1],e.is_bishop=[!1,!1,!0,!1,!1,!1,!1,!1,!0,!1,!1,!1,!1],e.is_king=[!1,!1,!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!0],e.is_queen=[!1,!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!0,!1],e.is_rook=[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!0,!1,!1],e.is_rook_or_queen=[!1,!1,!1,!1,!0,!0,!1,!1,!1,!1,!0,!0,!1],e.is_bishop_or_queen=[!1,!1,!0,!1,!1,!0,!1,!1,!0,!1,!1,!0,!1],e.is_slide_piece=[!1,!1,!0,!1,!0,!0,!1,!1,!0,!1,!0,!0,!1],e.is_white_piece=[!1,!0,!0,!0,!0,!0,!0,!1,!1,!1,!1,!1,!1],e.color_pieceflip=[[A.PIECES.WHITEPAWN,A.PIECES.WHITEKNIGHT,A.PIECES.WHITEBISHOP,A.PIECES.WHITEROOK,A.PIECES.WHITEQUEEN,A.PIECES.WHITEKING],[A.PIECES.BLACKPAWN,A.PIECES.BLACKKNIGHT,A.PIECES.BLACKBISHOP,A.PIECES.BLACKROOK,A.PIECES.BLACKQUEEN,A.PIECES.BLACKKING]],e.get_color_piece=[A.COLORS.BOTH,A.COLORS.WHITE,A.COLORS.WHITE,A.COLORS.WHITE,A.COLORS.WHITE,A.COLORS.WHITE,A.COLORS.WHITE,A.COLORS.BLACK,A.COLORS.BLACK,A.COLORS.BLACK,A.COLORS.BLACK,A.COLORS.BLACK,A.COLORS.BLACK,A.COLORS.BOTH],e.get_value_piece=[[0,128,825,781,1276,2538,0,128,825,781,1276,2538,0,0],[0,213,915,854,1380,2682,0,213,915,854,1380,2682,0,0]],e.get_poly_piece=[-1,1,5,3,7,9,11,0,4,2,6,8,10],e.is_color_bishop=[[!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1,!1]],e.is_color_knight=[[!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1]],e.is_color_rook=[[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1]],e.is_color_queen=[[!1,!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!1]],e.is_color_pawn=[[!1,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1,!1,!1]],e.flip=[56,57,58,59,60,61,62,63,48,49,50,51,52,53,54,55,40,41,42,43,44,45,46,47,32,33,34,35,36,37,38,39,24,25,26,27,28,29,30,31,16,17,18,19,20,21,22,23,8,9,10,11,12,13,14,15,0,1,2,3,4,5,6,7],e.files_board=new Array(e.BOARD_SQUARE_NUM),e.ranks_board=new Array(e.BOARD_SQUARE_NUM),e.initialize_game=function(){!function(){let t,i,n,B=0;for(t=0;t<e.BOARD_SQUARE_NUM;++t)e.square120_to_square64[t]=65;for(t=0;t<64;++t)e.square64_to_square120[t]=120;for(i=A.RANKS.FIRST_RANK;i<=A.RANKS.EIGHTH_RANK;++i)for(n=A.FILES.A_FILE;n<=A.FILES.H_FILE;n++){const t=A.FILE_RANK_TO_SQUARE(n,i);e.square64_to_square120[B]=t,e.square120_to_square64[t]=B,B++}}(),function(){for(let t=0;t<16;t++)for(let i=0;i<4;i++)0!=(t&1<<i)&&(e.castle64_hash[t]^=r.random64_poly[r.random_castle+i]);for(let t=0;t<120;t++)e.castle_permission[t]=15;e.castle_permission[A.SQUARES.E1]&=~A.CASTLING.WHITE_CASTLE_OO,e.castle_permission[A.SQUARES.H1]&=~A.CASTLING.WHITE_CASTLE_OO,e.castle_permission[A.SQUARES.E1]&=~A.CASTLING.WHITE_CASTLE_OOO,e.castle_permission[A.SQUARES.A1]&=~A.CASTLING.WHITE_CASTLE_OOO,e.castle_permission[A.SQUARES.E8]&=~A.CASTLING.BLACK_CASTLE_OO,e.castle_permission[A.SQUARES.H8]&=~A.CASTLING.BLACK_CASTLE_OO,e.castle_permission[A.SQUARES.E8]&=~A.CASTLING.BLACK_CASTLE_OOO,e.castle_permission[A.SQUARES.A8]&=~A.CASTLING.BLACK_CASTLE_OOO}(),function(){for(let t=0;t<e.BOARD_SQUARE_NUM;t++)e.files_board[t]=A.SQUARES.OFF_BOARD,e.ranks_board[t]=A.SQUARES.OFF_BOARD;for(let t=A.RANKS.FIRST_RANK;t<=A.RANKS.EIGHTH_RANK;++t)for(let i=A.FILES.A_FILE;i<=A.FILES.H_FILE;++i){const n=A.FILE_RANK_TO_SQUARE(i,t);e.files_board[n]=i,e.ranks_board[n]=t}}()},e.get_time_ms=function(){return(new Date).getTime()}}},e={};!function i(n){if(e[n])return e[n].exports;var B=e[n]={exports:{}};return t[n].call(B.exports,B,B.exports,i),B.exports}(101)})();